"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[4262],{28453:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>t});var s=n(96540);const r={},c=s.createContext(r);function d(e){const i=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(c.Provider,{value:i},e.children)}},50100:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"servicios-corporativos/servicio-track-trace/decisiones-arquitectura","title":"9. Decisiones de Arquitectura","description":"9.1 Decisiones Principales","source":"@site/docs/servicios-corporativos/servicio-track-trace/09-decisiones-arquitectura.md","sourceDirName":"servicios-corporativos/servicio-track-trace","slug":"/servicios-corporativos/servicio-track-trace/decisiones-arquitectura","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-track-trace/decisiones-arquitectura","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/servicio-track-trace/09-decisiones-arquitectura.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"8. Conceptos Transversales","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-track-trace/conceptos-transversales"},"next":{"title":"10. Requisitos de Calidad","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-track-trace/requisitos-calidad"}}');var r=n(74848),c=n(28453);const d={},t="9. Decisiones de Arquitectura",l={},a=[{value:"9.1 Decisiones Principales",id:"91-decisiones-principales",level:2},{value:"9.2 Alternativas Evaluadas",id:"92-alternativas-evaluadas",level:2},{value:"9.3 ADR-001: Event Sourcing como Patr\xf3n Principal",id:"93-adr-001-event-sourcing-como-patr\xf3n-principal",level:2},{value:"9.4 ADR-002: PostgreSQL como Event Store",id:"94-adr-002-postgresql-como-event-store",level:2},{value:"9.5 ADR-003: CQRS con Read Models Especializados",id:"95-adr-003-cqrs-con-read-models-especializados",level:2},{value:"9.6 ADR-006: Multi-tenant Schema Separation",id:"96-adr-006-multi-tenant-schema-separation",level:2},{value:"9.7 ADR-007: Observabilidad con OpenTelemetry",id:"97-adr-007-observabilidad-con-opentelemetry",level:2},{value:"9.8 Decisiones Pendientes",id:"98-decisiones-pendientes",level:2}];function o(e){const i={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"9-decisiones-de-arquitectura",children:"9. Decisiones de Arquitectura"})}),"\n",(0,r.jsx)(i.h2,{id:"91-decisiones-principales",children:"9.1 Decisiones Principales"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"ADR"}),(0,r.jsx)(i.th,{children:"Decisi\xf3n"}),(0,r.jsx)(i.th,{children:"Estado"}),(0,r.jsx)(i.th,{children:"Justificaci\xf3n"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"ADR-001"})}),(0,r.jsx)(i.td,{children:"CQRS + Event Sourcing"}),(0,r.jsx)(i.td,{children:"Aceptado"}),(0,r.jsx)(i.td,{children:"Trazabilidad inmutable"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"ADR-002"})}),(0,r.jsx)(i.td,{children:"PostgreSQL event store"}),(0,r.jsx)(i.td,{children:"Aceptado"}),(0,r.jsx)(i.td,{children:"Simplicidad inicial"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"ADR-003"})}),(0,r.jsx)(i.td,{children:"Deduplicaci\xf3n por tenant (realm)"}),(0,r.jsx)(i.td,{children:"Aceptado"}),(0,r.jsx)(i.td,{children:"Prevenci\xf3n duplicados"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"ADR-004"})}),(0,r.jsx)(i.td,{children:"Event-driven propagaci\xf3n"}),(0,r.jsx)(i.td,{children:"Aceptado"}),(0,r.jsx)(i.td,{children:"Integraci\xf3n SITA"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"ADR-006"})}),(0,r.jsx)(i.td,{children:"Multi-tenant schema separation"}),(0,r.jsx)(i.td,{children:"Aceptado"}),(0,r.jsx)(i.td,{children:"Aislamiento de datos"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"ADR-007"})}),(0,r.jsx)(i.td,{children:"Observabilidad OpenTelemetry"}),(0,r.jsx)(i.td,{children:"Aceptado"}),(0,r.jsx)(i.td,{children:"Trazas y m\xe9tricas"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"92-alternativas-evaluadas",children:"9.2 Alternativas Evaluadas"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Componente"}),(0,r.jsx)(i.th,{children:"Alternativas"}),(0,r.jsx)(i.th,{children:"Selecci\xf3n"}),(0,r.jsx)(i.th,{children:"Raz\xf3n"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"Event Store"})}),(0,r.jsx)(i.td,{children:"EventStore, PostgreSQL, SNS+SQS"}),(0,r.jsx)(i.td,{children:"PostgreSQL"}),(0,r.jsx)(i.td,{children:"Simplicidad"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"API"})}),(0,r.jsx)(i.td,{children:"REST, GraphQL, gRPC"}),(0,r.jsx)(i.td,{children:"REST"}),(0,r.jsx)(i.td,{children:"Flexibilidad"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"Deduplicaci\xf3n"})}),(0,r.jsx)(i.td,{children:"Global, Por tenant (realm)"}),(0,r.jsx)(i.td,{children:"Por tenant"}),(0,r.jsx)(i.td,{children:"Aislamiento"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"Propagaci\xf3n"})}),(0,r.jsx)(i.td,{children:"S\xedncrona, As\xedncrona"}),(0,r.jsx)(i.td,{children:"As\xedncrona"}),(0,r.jsx)(i.td,{children:"Desacoplamiento"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"93-adr-001-event-sourcing-como-patr\xf3n-principal",children:"9.3 ADR-001: Event Sourcing como Patr\xf3n Principal"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Estado"}),": Aceptado\n",(0,r.jsx)(i.strong,{children:"Fecha"}),": 2024-01-15\n",(0,r.jsx)(i.strong,{children:"Decidido por"}),": Equipo de Arquitectura"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Contexto"}),": Requisito de trazabilidad completa y auditor\xeda robusta."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Decisi\xf3n"}),": Se adopta ",(0,r.jsx)(i.code,{children:"Event Sourcing"})," como patr\xf3n arquitect\xf3nico principal."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Justificaci\xf3n"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Auditabilidad total"}),"\n",(0,r.jsx)(i.li,{children:"An\xe1lisis temporal"}),"\n",(0,r.jsx)(i.li,{children:"Escalabilidad de lectura"}),"\n",(0,r.jsx)(i.li,{children:"Debugging avanzado"}),"\n",(0,r.jsx)(i.li,{children:"Analytics nativo"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Consecuencias"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Positivas: Auditabilidad, escalabilidad, flexibilidad"}),"\n",(0,r.jsx)(i.li,{children:"Negativas: Complejidad inicial, eventual consistency"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"94-adr-002-postgresql-como-event-store",children:"9.4 ADR-002: PostgreSQL como Event Store"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Estado"}),": Aceptado\n",(0,r.jsx)(i.strong,{children:"Fecha"}),": 2024-01-20\n",(0,r.jsx)(i.strong,{children:"Decidido por"}),": Equipo de Arquitectura"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Contexto"}),": Almac\xe9n confiable y performante para eventos con soporte ACID."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Decisi\xf3n"}),": Se utiliza ",(0,r.jsx)(i.code,{children:"PostgreSQL"})," como event store."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Justificaci\xf3n"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"ACID compliance"}),"\n",(0,r.jsxs)(i.li,{children:["Soporte ",(0,r.jsx)(i.code,{children:"JSONB"})]}),"\n",(0,r.jsx)(i.li,{children:"Performance y experiencia del equipo"}),"\n",(0,r.jsx)(i.li,{children:"Ecosistema maduro"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Consecuencias"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Positivas: Confiabilidad, performance"}),"\n",(0,r.jsx)(i.li,{children:"Negativas: Complejidad para sharding futuro"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"95-adr-003-cqrs-con-read-models-especializados",children:"9.5 ADR-003: CQRS con Read Models Especializados"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Estado"}),": Aceptado\n",(0,r.jsx)(i.strong,{children:"Fecha"}),": 2024-01-25\n",(0,r.jsx)(i.strong,{children:"Decidido por"}),": Equipo de Arquitectura"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Contexto"}),": Optimizaci\xf3n de consultas y vistas especializadas."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Decisi\xf3n"}),": Se implementa ",(0,r.jsx)(i.code,{children:"CQRS"})," con read models especializados en ",(0,r.jsx)(i.code,{children:"PostgreSQL"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Justificaci\xf3n"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Performance y flexibilidad"}),"\n",(0,r.jsx)(i.li,{children:"Escalabilidad"}),"\n",(0,r.jsx)(i.li,{children:"Analytics y reporting"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Consecuencias"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Positivas: Performance, flexibilidad"}),"\n",(0,r.jsx)(i.li,{children:"Negativas: Complejidad adicional"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"96-adr-006-multi-tenant-schema-separation",children:"9.6 ADR-006: Multi-tenant Schema Separation"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Estado"}),": Aceptado\n",(0,r.jsx)(i.strong,{children:"Fecha"}),": 2024-02-10\n",(0,r.jsx)(i.strong,{children:"Decidido por"}),": Equipo de Arquitectura + Security"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Contexto"}),": Aislamiento completo de datos entre tenants (realms)."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Decisi\xf3n"}),": Separaci\xf3n de esquemas por tenant (realm) en ",(0,r.jsx)(i.code,{children:"PostgreSQL"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Justificaci\xf3n"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Aislamiento f\xedsico"}),"\n",(0,r.jsx)(i.li,{children:"Performance"}),"\n",(0,r.jsx)(i.li,{children:"Compliance"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Consecuencias"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Positivas: Aislamiento total, performance"}),"\n",(0,r.jsx)(i.li,{children:"Negativas: Gesti\xf3n compleja de schemas"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"97-adr-007-observabilidad-con-opentelemetry",children:"9.7 ADR-007: Observabilidad con OpenTelemetry"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Estado"}),": Aceptado\n",(0,r.jsx)(i.strong,{children:"Fecha"}),": 2024-02-15\n",(0,r.jsx)(i.strong,{children:"Decidido por"}),": Equipo de Arquitectura + SRE"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Contexto"}),": Observabilidad completa y trazabilidad distribuida."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Decisi\xf3n"}),": Se adopta ",(0,r.jsx)(i.code,{children:"OpenTelemetry"})," con ",(0,r.jsx)(i.code,{children:"Jaeger"})," y ",(0,r.jsx)(i.code,{children:"Prometheus"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Justificaci\xf3n"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Est\xe1ndar abierto"}),"\n",(0,r.jsx)(i.li,{children:"Unificaci\xf3n de logs, m\xe9tricas y trazas"}),"\n",(0,r.jsx)(i.li,{children:"Correlaci\xf3n distribuida"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Consecuencias"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Positivas: Observabilidad completa"}),"\n",(0,r.jsx)(i.li,{children:"Negativas: Overhead de instrumentaci\xf3n"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"98-decisiones-pendientes",children:"9.8 Decisiones Pendientes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Estrategia de sharding para escalamiento horizontal"}),"\n",(0,r.jsx)(i.li,{children:"Pol\xedticas de archivado de eventos"}),"\n",(0,r.jsx)(i.li,{children:"Estrategia de evoluci\xf3n de esquemas de eventos"}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,c.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);