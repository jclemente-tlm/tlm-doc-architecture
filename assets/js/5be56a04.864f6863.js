"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[3907],{28453:(e,i,s)=>{s.d(i,{R:()=>r,x:()=>c});var d=s(96540);const n={},t=d.createContext(n);function r(e){const i=d.useContext(t);return d.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),d.createElement(t.Provider,{value:i},e.children)}},29260:(e,i,s)=>{s.d(i,{A:()=>d});const d=s.p+"assets/images/notification_system_scheduler-a60d7cab24e4d5c43334b4f6719d0ccb.png"},42334:(e,i,s)=>{s.d(i,{A:()=>d});const d=s.p+"assets/images/notification_system_email_processor-42a61f4048469df90baf384481b39fd5.png"},49125:(e,i,s)=>{s.d(i,{A:()=>d});const d=s.p+"assets/images/notification_system_sms_processor-cd6855c134d921695e4eefb2e21e477b.png"},49628:(e,i,s)=>{s.d(i,{A:()=>d});const d=s.p+"assets/images/notification_system_whatsapp_processor-af02322d44c5b3da0a55fca2bf0dfc57.png"},52774:(e,i,s)=>{s.d(i,{A:()=>d});const d=s.p+"assets/images/notification_system-cf7ef51b3c08d3c0ffe5693053cdd56c.png"},61019:(e,i,s)=>{s.d(i,{A:()=>d});const d=s.p+"assets/images/notification_system_api-d95779b2ae537ed31b684db11894ad6c.png"},70181:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"servicios-corporativos/servicio-notificacion/vista-bloques-construccion","title":"5. Vista De Bloques De Construcci\xf3n","description":"Esta secci\xf3n describe la estructura modular del Sistema de Notificaci\xf3n, detallando contenedores, componentes, esquemas de datos, APIs y ejemplos de implementaci\xf3n. Se incluyen diagramas C4 para ilustrar la arquitectura y la interacci\xf3n entre los bloques principales.","source":"@site/docs/servicios-corporativos/servicio-notificacion/05-vista-bloques-construccion.md","sourceDirName":"servicios-corporativos/servicio-notificacion","slug":"/servicios-corporativos/servicio-notificacion/vista-bloques-construccion","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-bloques-construccion","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/servicio-notificacion/05-vista-bloques-construccion.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"4. Estrategia De Soluci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/estrategia-solucion"},"next":{"title":"6. Vista De Tiempo De Ejecuci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-tiempo-ejecucion"}}');var n=s(74848),t=s(28453);const r={},c="5. Vista De Bloques De Construcci\xf3n",l={},o=[{value:"5.1 Contenedores Principales",id:"51-contenedores-principales",level:2},{value:"5.2 Vista de Componentes y Detalles",id:"52-vista-de-componentes-y-detalles",level:2},{value:"Email Processor",id:"email-processor",level:3},{value:"SMS Processor",id:"sms-processor",level:3},{value:"WhatsApp Processor",id:"whatsapp-processor",level:3},{value:"Push Processor",id:"push-processor",level:3},{value:"Scheduler",id:"scheduler",level:3},{value:"5.4 Esquemas De Base De Datos",id:"54-esquemas-de-base-de-datos",level:2},{value:"5.4.1 Tabla: <code>notifications</code>",id:"541-tabla-notifications",level:3},{value:"5.4.2 Tabla: <code>notification_deliveries</code>",id:"542-tabla-notification_deliveries",level:3},{value:"5.4.3 Tabla: <code>notification_templates</code>",id:"543-tabla-notification_templates",level:3},{value:"5.5 Endpoints De API",id:"55-endpoints-de-api",level:2},{value:"5.5.1 Notification API",id:"551-notification-api",level:3},{value:"5.6 Contratos De Datos (DTOs)",id:"56-contratos-de-datos-dtos",level:2},{value:"5.6.1 NotificationRequest (Contrato)",id:"561-notificationrequest-contrato",level:3},{value:"Ejemplo de contrato NotificationRequest",id:"ejemplo-de-contrato-notificationrequest",level:4},{value:"Ejemplo de notificaci\xf3n email generada",id:"ejemplo-de-notificaci\xf3n-email-generada",level:4}];function a(e){const i={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"5-vista-de-bloques-de-construcci\xf3n",children:"5. Vista De Bloques De Construcci\xf3n"})}),"\n",(0,n.jsx)(i.p,{children:"Esta secci\xf3n describe la estructura modular del Sistema de Notificaci\xf3n, detallando contenedores, componentes, esquemas de datos, APIs y ejemplos de implementaci\xf3n. Se incluyen diagramas C4 para ilustrar la arquitectura y la interacci\xf3n entre los bloques principales."}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"Vista General del Sistema de Notificaci\xf3n",src:s(52774).A+"",width:"7786",height:"3404"}),"\n",(0,n.jsx)(i.em,{children:"Figura 5.1: Contenedores principales del sistema"})]}),"\n",(0,n.jsx)(i.h2,{id:"51-contenedores-principales",children:"5.1 Contenedores Principales"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contenedor"}),(0,n.jsx)(i.th,{children:"Responsabilidad"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Notification API"}),(0,n.jsx)(i.td,{children:"Recepci\xf3n y validaci\xf3n de solicitudes"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:".NET 8 Web API"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Notification Processor"}),(0,n.jsx)(i.td,{children:"Procesamiento y env\xedo de notificaciones"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:".NET 8 Worker Service"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Notification Database"}),(0,n.jsx)(i.td,{children:"Persistencia de datos y auditor\xeda"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"PostgreSQL 15+"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"emailQueue"}),(0,n.jsx)(i.td,{children:"Cola de mensajes email"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"AWS SQS"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"smsQueue"}),(0,n.jsx)(i.td,{children:"Cola de mensajes SMS"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"AWS SQS"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"whatsappQueue"}),(0,n.jsx)(i.td,{children:"Cola de mensajes WhatsApp"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"AWS SQS"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"pushQueue"}),(0,n.jsx)(i.td,{children:"Cola de mensajes push"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"AWS SQS"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"SNS (opcional)"}),(0,n.jsx)(i.td,{children:"Notificaci\xf3n fan-out a colas SQS"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"AWS SNS"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Email Processor"}),(0,n.jsx)(i.td,{children:"Procesamiento y env\xedo de emails"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:".NET 8 Worker Service"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"SMS Processor"}),(0,n.jsx)(i.td,{children:"Procesamiento y env\xedo de SMS"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:".NET 8 Worker Service"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"WhatsApp Processor"}),(0,n.jsx)(i.td,{children:"Procesamiento y env\xedo de WhatsApp"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:".NET 8 Worker Service"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Push Processor"}),(0,n.jsx)(i.td,{children:"Procesamiento y env\xedo de notificaciones push"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:".NET 8 Worker Service"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Attachment Storage"}),(0,n.jsx)(i.td,{children:"Almacenamiento de adjuntos"}),(0,n.jsx)(i.td,{children:"S3, File System"})]})]})]}),"\n",(0,n.jsx)(i.h2,{id:"52-vista-de-componentes-y-detalles",children:"5.2 Vista de Componentes y Detalles"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"Componentes Notification API",src:s(61019).A+"",width:"5851",height:"2945"}),"\n",(0,n.jsx)(i.em,{children:"Figura 5.2: Componentes internos de Notification API"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Componente"}),(0,n.jsx)(i.th,{children:"Responsabilidad"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Notification Controller"}),(0,n.jsx)(i.td,{children:"Exposici\xf3n de endpoints REST"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"ASP.NET Core"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Template Controller"}),(0,n.jsx)(i.td,{children:"Gesti\xf3n de plantillas"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"ASP.NET Core"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Attachment Service"}),(0,n.jsx)(i.td,{children:"Manejo de adjuntos"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:".NET 8"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Validation Service"}),(0,n.jsx)(i.td,{children:"Validaci\xf3n de datos y reglas"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"FluentValidation"})})]})]})]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"Componentes Notification Processor",src:s(92831).A+"",width:"5305",height:"2684"}),"\n",(0,n.jsx)(i.em,{children:"Figura 5.3: Componentes internos de Notification Processor"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Componente"}),(0,n.jsx)(i.th,{children:"Responsabilidad"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Consumer"}),(0,n.jsx)(i.td,{children:"Consume mensajes desde la cola de solicitudes de notificaci\xf3n"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Orchestrator Service"}),(0,n.jsx)(i.td,{children:"Valida datos, construye el mensaje y lo distribuye al canal correspondiente"}),(0,n.jsx)(i.td,{children:"C# .NET 8"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Message Builder"}),(0,n.jsx)(i.td,{children:"Genera el mensaje final para cada canal utilizando plantillas y datos"}),(0,n.jsx)(i.td,{children:"C# .NET 8"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Template Engine"}),(0,n.jsx)(i.td,{children:"Renderiza plantillas con soporte i18n y variables din\xe1micas"}),(0,n.jsx)(i.td,{children:"C#, Liquid Templates"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Adapter"}),(0,n.jsx)(i.td,{children:"Env\xeda el mensaje procesado a la cola espec\xedfica del canal"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Repository"}),(0,n.jsx)(i.td,{children:"Guarda el estado y eventos de las notificaciones procesadas en la base de datos"}),(0,n.jsx)(i.td,{children:"C# .NET 8, Entity Framework Core"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Configuration Manager"}),(0,n.jsx)(i.td,{children:"Gestiona configuraciones del servicio y por tenant"}),(0,n.jsx)(i.td,{children:"C#, .NET 8, EF Core"})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"email-processor",children:"Email Processor"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"Componentes Email Processor",src:s(42334).A+"",width:"4070",height:"2595"}),"\n",(0,n.jsx)(i.em,{children:"Figura 5.4: Componentes internos de Email Processor"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Componente"}),(0,n.jsx)(i.th,{children:"Responsabilidad"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Consumer"}),(0,n.jsx)(i.td,{children:"Consume mensajes de la cola de notificaci\xf3n Email"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Service"}),(0,n.jsx)(i.td,{children:"Procesa y env\xeda notificaciones por email"}),(0,n.jsx)(i.td,{children:"C# .NET 8"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Adapter"}),(0,n.jsx)(i.td,{children:"Env\xeda notificaciones al proveedor externo de email"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Repository"}),(0,n.jsx)(i.td,{children:"Actualiza el estado de las notificaciones enviadas"}),(0,n.jsx)(i.td,{children:"C# .NET 8, Entity Framework Core"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Attachment Fetcher"}),(0,n.jsx)(i.td,{children:"Obtiene archivos adjuntos desde almacenamiento"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Configuration Manager"}),(0,n.jsx)(i.td,{children:"Gestiona configuraciones del servicio y por tenant"}),(0,n.jsx)(i.td,{children:"C#, .NET 8, EF Core"})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"sms-processor",children:"SMS Processor"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"Componentes SMS Processor",src:s(49125).A+"",width:"4140",height:"2190"}),"\n",(0,n.jsx)(i.em,{children:"Figura 5.5: Componentes internos de SMS Processor"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Componente"}),(0,n.jsx)(i.th,{children:"Responsabilidad"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Consumer"}),(0,n.jsx)(i.td,{children:"Consume mensajes de la cola notificaci\xf3n SMS"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Service"}),(0,n.jsx)(i.td,{children:"Procesa y env\xeda notificaciones SMS"}),(0,n.jsx)(i.td,{children:"C# .NET 8"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Adapter"}),(0,n.jsx)(i.td,{children:"Env\xeda notificaciones al proveedor externo de SMS"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Repository"}),(0,n.jsx)(i.td,{children:"Actualiza el estado de las notificaciones enviadas"}),(0,n.jsx)(i.td,{children:"C# .NET 8, Entity Framework Core"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Configuration Manager"}),(0,n.jsx)(i.td,{children:"Gestiona configuraciones del servicio y por tenant"}),(0,n.jsx)(i.td,{children:"C#, .NET 8, EF Core"})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"whatsapp-processor",children:"WhatsApp Processor"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"Componentes WhatsApp Processor",src:s(49628).A+"",width:"4181",height:"2695"}),"\n",(0,n.jsx)(i.em,{children:"Figura 5.6: Componentes internos de WhatsApp Processor"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Componente"}),(0,n.jsx)(i.th,{children:"Responsabilidad"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Consumer"}),(0,n.jsx)(i.td,{children:"Consume mensajes de la cola notificaci\xf3n WhatsApp"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Service"}),(0,n.jsx)(i.td,{children:"Procesa y env\xeda notificaciones WhatsApp"}),(0,n.jsx)(i.td,{children:"C# .NET 8"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Adapter"}),(0,n.jsx)(i.td,{children:"Env\xeda notificaciones al proveedor externo de WhatsApp"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Repository"}),(0,n.jsx)(i.td,{children:"Actualiza el estado de las notificaciones enviadas"}),(0,n.jsx)(i.td,{children:"C# .NET 8, Entity Framework Core"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Attachment Fetcher"}),(0,n.jsx)(i.td,{children:"Obtiene archivos adjuntos desde almacenamiento"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Configuration Manager"}),(0,n.jsx)(i.td,{children:"Gestiona configuraciones del servicio y por tenant"}),(0,n.jsx)(i.td,{children:"C#, .NET 8, EF Core"})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"push-processor",children:"Push Processor"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"Componentes Push Processor",src:s(74050).A+"",width:"4115",height:"2574"}),"\n",(0,n.jsx)(i.em,{children:"Figura 5.7: Componentes internos de Push Processor"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Componente"}),(0,n.jsx)(i.th,{children:"Responsabilidad"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Consumer"}),(0,n.jsx)(i.td,{children:"Consume mensajes de la cola notificaci\xf3n Push"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Service"}),(0,n.jsx)(i.td,{children:"Procesa y env\xeda notificaciones Push"}),(0,n.jsx)(i.td,{children:"C# .NET 8"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Adapter"}),(0,n.jsx)(i.td,{children:"Env\xeda notificaciones al proveedor externo de Push"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Repository"}),(0,n.jsx)(i.td,{children:"Actualiza el estado de las notificaciones enviadas"}),(0,n.jsx)(i.td,{children:"C# .NET 8, Entity Framework Core"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Attachment Fetcher"}),(0,n.jsx)(i.td,{children:"Obtiene archivos adjuntos desde almacenamiento"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Configuration Manager"}),(0,n.jsx)(i.td,{children:"Gestiona configuraciones del servicio y por tenant"}),(0,n.jsx)(i.td,{children:"C#, .NET 8, EF Core"})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"scheduler",children:"Scheduler"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"Componentes Scheduler",src:s(29260).A+"",width:"4160",height:"2016"}),"\n",(0,n.jsx)(i.em,{children:"Figura 5.8: Componentes internos de Scheduler"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Componente"}),(0,n.jsx)(i.th,{children:"Responsabilidad"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Scheduler Worker"}),(0,n.jsx)(i.td,{children:"Ejecuta tareas programadas para enviar notificaciones"}),(0,n.jsx)(i.td,{children:"Worker Service, C# .NET 8"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Service"}),(0,n.jsx)(i.td,{children:"Procesa y programa el env\xedo de notificaciones"}),(0,n.jsx)(i.td,{children:"C# .NET 8"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Queue Publisher"}),(0,n.jsx)(i.td,{children:"Env\xeda notificaciones programadas a la cola"}),(0,n.jsx)(i.td,{children:"C# .NET 8, AWS SDK"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Repository"}),(0,n.jsx)(i.td,{children:"Acceso a notificaciones programadas en la base de datos"}),(0,n.jsx)(i.td,{children:"C# .NET 8, Entity Framework Core"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Configuration Manager"}),(0,n.jsx)(i.td,{children:"Gestiona configuraciones del servicio y por tenant"}),(0,n.jsx)(i.td,{children:"C#, .NET 8, EF Core"})]})]})]}),"\n",(0,n.jsx)(i.h2,{id:"54-esquemas-de-base-de-datos",children:"5.4 Esquemas De Base De Datos"}),"\n",(0,n.jsxs)(i.h3,{id:"541-tabla-notifications",children:["5.4.1 Tabla: ",(0,n.jsx)(i.code,{children:"notifications"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Campo"}),(0,n.jsx)(i.th,{children:"Tipo"}),(0,n.jsx)(i.th,{children:"Descripci\xf3n"}),(0,n.jsx)(i.th,{children:"Restricciones"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"id"}),(0,n.jsx)(i.td,{children:"UUID"}),(0,n.jsx)(i.td,{children:"Identificador \xfanico"}),(0,n.jsx)(i.td,{children:"PRIMARY KEY"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"request_id"}),(0,n.jsx)(i.td,{children:"VARCHAR(100)"}),(0,n.jsx)(i.td,{children:"ID de la solicitud"}),(0,n.jsx)(i.td,{children:"NOT NULL, INDEX"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message_id"}),(0,n.jsx)(i.td,{children:"VARCHAR(100)"}),(0,n.jsx)(i.td,{children:"ID del mensaje"}),(0,n.jsx)(i.td,{children:"UNIQUE"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"tenant_id"}),(0,n.jsx)(i.td,{children:"VARCHAR(50)"}),(0,n.jsx)(i.td,{children:"Identificador del tenant"}),(0,n.jsx)(i.td,{children:"NOT NULL, INDEX"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"user_id"}),(0,n.jsx)(i.td,{children:"VARCHAR(100)"}),(0,n.jsx)(i.td,{children:"ID del usuario destinatario"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"notification_type"}),(0,n.jsx)(i.td,{children:"VARCHAR(50)"}),(0,n.jsx)(i.td,{children:"transactional, marketing"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"channels"}),(0,n.jsx)(i.td,{children:"JSONB"}),(0,n.jsx)(i.td,{children:"Canales solicitados"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"recipient"}),(0,n.jsx)(i.td,{children:"JSONB"}),(0,n.jsx)(i.td,{children:"Datos del destinatario"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message_content"}),(0,n.jsx)(i.td,{children:"JSONB"}),(0,n.jsx)(i.td,{children:"Contenido del mensaje"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"schedule"}),(0,n.jsx)(i.td,{children:"JSONB"}),(0,n.jsx)(i.td,{children:"Configuraci\xf3n de programaci\xf3n"}),(0,n.jsx)(i.td,{children:"NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"metadata"}),(0,n.jsx)(i.td,{children:"JSONB"}),(0,n.jsx)(i.td,{children:"Metadatos adicionales"}),(0,n.jsx)(i.td,{children:"NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"status"}),(0,n.jsx)(i.td,{children:"VARCHAR(20)"}),(0,n.jsx)(i.td,{children:"pending, processing, sent, failed"}),(0,n.jsx)(i.td,{children:"NOT NULL, DEFAULT 'pending'"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"created_at"}),(0,n.jsx)(i.td,{children:"TIMESTAMP"}),(0,n.jsx)(i.td,{children:"Fecha de creaci\xf3n"}),(0,n.jsx)(i.td,{children:"NOT NULL, DEFAULT NOW()"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"updated_at"}),(0,n.jsx)(i.td,{children:"TIMESTAMP"}),(0,n.jsx)(i.td,{children:"Fecha de actualizaci\xf3n"}),(0,n.jsx)(i.td,{children:"NOT NULL, DEFAULT NOW()"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"sent_at"}),(0,n.jsx)(i.td,{children:"TIMESTAMP"}),(0,n.jsx)(i.td,{children:"Fecha de env\xedo"}),(0,n.jsx)(i.td,{children:"NULL"})]})]})]}),"\n",(0,n.jsxs)(i.h3,{id:"542-tabla-notification_deliveries",children:["5.4.2 Tabla: ",(0,n.jsx)(i.code,{children:"notification_deliveries"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Campo"}),(0,n.jsx)(i.th,{children:"Tipo"}),(0,n.jsx)(i.th,{children:"Descripci\xf3n"}),(0,n.jsx)(i.th,{children:"Restricciones"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"id"}),(0,n.jsx)(i.td,{children:"UUID"}),(0,n.jsx)(i.td,{children:"Identificador \xfanico"}),(0,n.jsx)(i.td,{children:"PRIMARY KEY"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"notification_id"}),(0,n.jsx)(i.td,{children:"UUID"}),(0,n.jsx)(i.td,{children:"Referencia a notification"}),(0,n.jsx)(i.td,{children:"FOREIGN KEY, NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"channel"}),(0,n.jsx)(i.td,{children:"VARCHAR(20)"}),(0,n.jsx)(i.td,{children:"Canal: email, sms, push, whatsapp, in-app"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"status"}),(0,n.jsx)(i.td,{children:"VARCHAR(20)"}),(0,n.jsx)(i.td,{children:"pending, sent, delivered, failed"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"provider"}),(0,n.jsx)(i.td,{children:"VARCHAR(50)"}),(0,n.jsx)(i.td,{children:"Proveedor utilizado"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"provider_message_id"}),(0,n.jsx)(i.td,{children:"VARCHAR(200)"}),(0,n.jsx)(i.td,{children:"ID del proveedor"}),(0,n.jsx)(i.td,{children:"NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"error_message"}),(0,n.jsx)(i.td,{children:"TEXT"}),(0,n.jsx)(i.td,{children:"Mensaje de error"}),(0,n.jsx)(i.td,{children:"NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"retry_count"}),(0,n.jsx)(i.td,{children:"INTEGER"}),(0,n.jsx)(i.td,{children:"N\xfamero de reintentos"}),(0,n.jsx)(i.td,{children:"DEFAULT 0"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"sent_at"}),(0,n.jsx)(i.td,{children:"TIMESTAMP"}),(0,n.jsx)(i.td,{children:"Fecha de env\xedo"}),(0,n.jsx)(i.td,{children:"NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"delivered_at"}),(0,n.jsx)(i.td,{children:"TIMESTAMP"}),(0,n.jsx)(i.td,{children:"Fecha de entrega confirmada"}),(0,n.jsx)(i.td,{children:"NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"created_at"}),(0,n.jsx)(i.td,{children:"TIMESTAMP"}),(0,n.jsx)(i.td,{children:"Fecha de creaci\xf3n"}),(0,n.jsx)(i.td,{children:"NOT NULL, DEFAULT NOW()"})]})]})]}),"\n",(0,n.jsxs)(i.h3,{id:"543-tabla-notification_templates",children:["5.4.3 Tabla: ",(0,n.jsx)(i.code,{children:"notification_templates"})]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Campo"}),(0,n.jsx)(i.th,{children:"Tipo"}),(0,n.jsx)(i.th,{children:"Descripci\xf3n"}),(0,n.jsx)(i.th,{children:"Restricciones"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"id"}),(0,n.jsx)(i.td,{children:"UUID"}),(0,n.jsx)(i.td,{children:"Identificador \xfanico"}),(0,n.jsx)(i.td,{children:"PRIMARY KEY"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"template_id"}),(0,n.jsx)(i.td,{children:"VARCHAR(100)"}),(0,n.jsx)(i.td,{children:"ID del template"}),(0,n.jsx)(i.td,{children:"UNIQUE, NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"tenant_id"}),(0,n.jsx)(i.td,{children:"VARCHAR(50)"}),(0,n.jsx)(i.td,{children:"Identificador del tenant"}),(0,n.jsx)(i.td,{children:"NOT NULL, INDEX"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"name"}),(0,n.jsx)(i.td,{children:"VARCHAR(200)"}),(0,n.jsx)(i.td,{children:"Nombre descriptivo"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"channel"}),(0,n.jsx)(i.td,{children:"VARCHAR(20)"}),(0,n.jsx)(i.td,{children:"Canal: email, sms, push, whatsapp, in-app"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"subject_template"}),(0,n.jsx)(i.td,{children:"TEXT"}),(0,n.jsx)(i.td,{children:"Template del asunto"}),(0,n.jsx)(i.td,{children:"NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"body_template"}),(0,n.jsx)(i.td,{children:"TEXT"}),(0,n.jsx)(i.td,{children:"Template del cuerpo"}),(0,n.jsx)(i.td,{children:"NOT NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"variables"}),(0,n.jsx)(i.td,{children:"JSONB"}),(0,n.jsx)(i.td,{children:"Variables disponibles"}),(0,n.jsx)(i.td,{children:"NULL"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"is_active"}),(0,n.jsx)(i.td,{children:"BOOLEAN"}),(0,n.jsx)(i.td,{children:"Estado del template"}),(0,n.jsx)(i.td,{children:"DEFAULT true"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"created_at"}),(0,n.jsx)(i.td,{children:"TIMESTAMP"}),(0,n.jsx)(i.td,{children:"Fecha de creaci\xf3n"}),(0,n.jsx)(i.td,{children:"NOT NULL, DEFAULT NOW()"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"updated_at"}),(0,n.jsx)(i.td,{children:"TIMESTAMP"}),(0,n.jsx)(i.td,{children:"Fecha de actualizaci\xf3n"}),(0,n.jsx)(i.td,{children:"NOT NULL, DEFAULT NOW()"})]})]})]}),"\n",(0,n.jsx)(i.h2,{id:"55-endpoints-de-api",children:"5.5 Endpoints De API"}),"\n",(0,n.jsx)(i.p,{children:"Se describen los principales endpoints REST para la gesti\xf3n y consulta de notificaciones y plantillas. Los contratos de datos siguen el est\xe1ndar DTO y est\xe1n alineados con la arquitectura Clean Architecture."}),"\n",(0,n.jsx)(i.h3,{id:"551-notification-api",children:"5.5.1 Notification API"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["POST ",(0,n.jsx)(i.code,{children:"/api/v1/notifications"}),": Enviar nueva notificaci\xf3n"]}),"\n",(0,n.jsxs)(i.li,{children:["GET ",(0,n.jsx)(i.code,{children:"/api/v1/notifications/{notificationId}"}),": Consultar estado de notificaci\xf3n"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"56-contratos-de-datos-dtos",children:"5.6 Contratos De Datos (DTOs)"}),"\n",(0,n.jsx)(i.p,{children:"Los siguientes contratos definen la estructura de los datos de entrada y salida de la API:"}),"\n",(0,n.jsx)(i.h3,{id:"561-notificationrequest-contrato",children:"5.6.1 NotificationRequest (Contrato)"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Campo"}),(0,n.jsx)(i.th,{children:"Tipo"}),(0,n.jsx)(i.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"requestId"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"Identificador \xfanico de la solicitud"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"timestamp"}),(0,n.jsx)(i.td,{children:"string (ISO 8601)"}),(0,n.jsx)(i.td,{children:"Fecha y hora de la solicitud"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"notificationType"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:'Tipo de notificaci\xf3n: "transactional", "marketing", "alert"'})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"channels"}),(0,n.jsx)(i.td,{children:"array de string"}),(0,n.jsx)(i.td,{children:"Canales solicitados"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"recipient"}),(0,n.jsx)(i.td,{children:"objeto"}),(0,n.jsx)(i.td,{children:"Informaci\xf3n del destinatario (ver subcampos)"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"recipient.userId"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"Identificador del usuario"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"recipient.email"}),(0,n.jsx)(i.td,{children:"string (opcional)"}),(0,n.jsx)(i.td,{children:"Correo electr\xf3nico del destinatario"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"recipient.phone"}),(0,n.jsx)(i.td,{children:"string (opcional)"}),(0,n.jsx)(i.td,{children:"Tel\xe9fono del destinatario"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"recipient.pushToken"}),(0,n.jsx)(i.td,{children:"string (opcional)"}),(0,n.jsx)(i.td,{children:"Token push"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"recipient.customFields"}),(0,n.jsx)(i.td,{children:"objeto (opcional)"}),(0,n.jsx)(i.td,{children:"Campos personalizados del destinatario"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message"}),(0,n.jsx)(i.td,{children:"objeto"}),(0,n.jsx)(i.td,{children:"Contenido del mensaje (ver subcampos)"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.subject"}),(0,n.jsx)(i.td,{children:"string (opcional)"}),(0,n.jsx)(i.td,{children:"Asunto (para email)"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.body"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"Cuerpo del mensaje"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.attachments"}),(0,n.jsx)(i.td,{children:"array de string (op)"}),(0,n.jsx)(i.td,{children:"URLs de adjuntos"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.smsText"}),(0,n.jsx)(i.td,{children:"string (opcional)"}),(0,n.jsx)(i.td,{children:"Texto SMS"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.pushNotification"}),(0,n.jsx)(i.td,{children:"objeto (op)"}),(0,n.jsx)(i.td,{children:"Datos para notificaci\xf3n push (ver subcampos)"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.pushNotification.title"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"T\xedtulo de la notificaci\xf3n push"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.pushNotification.body"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"Cuerpo de la notificaci\xf3n push"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.pushNotification.icon"}),(0,n.jsx)(i.td,{children:"string (op)"}),(0,n.jsx)(i.td,{children:"URL de icono"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.pushNotification.action"}),(0,n.jsx)(i.td,{children:"objeto (op)"}),(0,n.jsx)(i.td,{children:"Acci\xf3n asociada"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.pushNotification.action.type"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"Tipo de acci\xf3n"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"message.pushNotification.action.url"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"URL destino"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"schedule"}),(0,n.jsx)(i.td,{children:"objeto (opcional)"}),(0,n.jsx)(i.td,{children:"Programaci\xf3n de env\xedo (ver subcampos)"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"schedule.sendAt"}),(0,n.jsx)(i.td,{children:"string (ISO 8601)"}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"Fecha/hora"})," de env\xedo programado"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"schedule.timeZone"}),(0,n.jsx)(i.td,{children:"string (opcional)"}),(0,n.jsx)(i.td,{children:"Zona horaria"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"metadata"}),(0,n.jsx)(i.td,{children:"objeto (opcional)"}),(0,n.jsx)(i.td,{children:"Metadatos adicionales (prioridad, reintentos, etc.)"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"metadata.priority"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"Prioridad de la notificaci\xf3n"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"metadata.retries"}),(0,n.jsx)(i.td,{children:"integer"}),(0,n.jsx)(i.td,{children:"N\xfamero de reintentos permitidos"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"metadata.sentBy"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"Servicio o sistema que origina la notificaci\xf3n"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"metadata.templateId"}),(0,n.jsx)(i.td,{children:"string"}),(0,n.jsx)(i.td,{children:"Identificador de la plantilla utilizada"})]})]})]}),"\n",(0,n.jsx)(i.h4,{id:"ejemplo-de-contrato-notificationrequest",children:"Ejemplo de contrato NotificationRequest"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-json",children:'{\n  "requestId": "abc123",\n  "timestamp": "2024-09-17T14:00:00Z",\n  "notificationType": "transactional",\n  "channels": ["email", "sms", "push"],\n  "recipient": {\n    "userId": "usuario789",\n    "email": "usuario@ejemplo.com"\n  },\n  "message": {\n    "subject": "Confirmaci\xf3n de Pedido",\n    "body": "\xa1Gracias por su pedido! Su pedido #123456 ha sido confirmado.",\n    "attachments": ["https://ejemplo.com/factura123456.pdf"],\n    "smsText": "\xa1Gracias por su pedido! Pedido #123456 confirmado.",\n    "pushNotification": {\n      "title": "Pedido Confirmado",\n      "body": "Su pedido #123456 ha sido confirmado. Revise su correo para m\xe1s detalles.",\n      "icon": "https://ejemplo.com/icono.png",\n      "action": {\n        "type": "verPedido",\n        "url": "https://ejemplo.com/pedido/123456"\n      }\n    }\n  },\n  "schedule": {\n    "sendAt": "2024-09-17T15:00:00Z"\n  },\n  "metadata": {\n    "priority": "high",\n    "retries": 3,\n    "sentBy": "OrderService",\n    "templateId": "orderConfirmationTemplate"\n  }\n}\n'})}),"\n",(0,n.jsx)(i.h4,{id:"ejemplo-de-notificaci\xf3n-email-generada",children:"Ejemplo de notificaci\xf3n email generada"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-json",children:'{\n  "messageId": "msg12345",\n  "timestamp": "2024-09-17T14:00:00Z",\n  "notificationType": "transactional",\n  "channel": "email",\n  "recipient": {\n    "userId": "user789",\n    "email": "user@example.com"\n  },\n  "messageContent": {\n    "subject": "Confirmaci\xf3n de Pedido - Pedido #123456",\n    "body": {\n      "html": "<html><body><h1>\xa1Gracias por su pedido!</h1><p>Su pedido #123456 ha sido confirmado. Puede rastrear su pedido <a href=\'https://example.com/track\'>aqu\xed</a>.</p></body></html>",\n      "plainText": "\xa1Gracias por su pedido! Su pedido #123456 ha sido confirmado. Rastrear su pedido aqu\xed: https://example.com/track"\n    },\n    "attachments": [\n      {\n        "url": "https://example.com/invoice123456.pdf",\n        "fileName": "invoice123456.pdf",\n        "mimeType": "application/pdf"\n      }\n    ]\n  },\n  "metadata": {\n    "priority": "high",\n    "retries": 3,\n    "sentBy": "OrderService",\n    "templateId": "orderConfirmationTemplate",\n    "requestId": "req9876"\n  }\n}\n'})})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},74050:(e,i,s)=>{s.d(i,{A:()=>d});const d=s.p+"assets/images/notification_system_push_processor-951220ea0fdfef5ef8518c635a98e16c.png"},92831:(e,i,s)=>{s.d(i,{A:()=>d});const d=s.p+"assets/images/notification_system_processor-d1fa6cf8c7b61a01de1b975db9c7669e.png"}}]);