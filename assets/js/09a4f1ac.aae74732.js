"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[6374],{4600:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"servicios-corporativos/servicio-identidad/vista-bloques-construccion","title":"5. Vista de bloques de construcci\xf3n","description":"Sistema de Identidad - Vista de Componentes","source":"@site/docs/servicios-corporativos/servicio-identidad/05-vista-bloques-construccion.md","sourceDirName":"servicios-corporativos/servicio-identidad","slug":"/servicios-corporativos/servicio-identidad/vista-bloques-construccion","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-identidad/vista-bloques-construccion","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/servicio-identidad/05-vista-bloques-construccion.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"4. Estrategia de soluci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-identidad/estrategia-solucion"},"next":{"title":"6. Vista de tiempo de ejecuci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-identidad/vista-tiempo-ejecucion"}}');var t=n(74848),r=n(28453);const c={},d="5. Vista de bloques de construcci\xf3n",o={},a=[{value:"5.1 Componentes principales",id:"51-componentes-principales",level:2},{value:"5.2 Relaciones y estructura",id:"52-relaciones-y-estructura",level:2},{value:"5.3 Principios de construcci\xf3n",id:"53-principios-de-construcci\xf3n",level:2},{value:"5.4 Observabilidad y monitoreo",id:"54-observabilidad-y-monitoreo",level:2},{value:"5.5 Persistencia",id:"55-persistencia",level:2},{value:"5.6 Interfaces externas",id:"56-interfaces-externas",level:2},{value:"5.7 Ejemplos t\xe9cnicos",id:"57-ejemplos-t\xe9cnicos",level:2},{value:"Obtenci\xf3n de token de acceso (OAuth2/OIDC client credentials)",id:"obtenci\xf3n-de-token-de-acceso-oauth2oidc-client-credentials",level:3},{value:"5.8 Referencias",id:"58-referencias",level:2}];function l(e){const i={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"5-vista-de-bloques-de-construcci\xf3n",children:"5. Vista de bloques de construcci\xf3n"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Sistema de Identidad - Vista de Componentes",src:n(68171).A+"",width:"3525",height:"2341"})}),"\n",(0,t.jsxs)(i.blockquote,{children:["\n",(0,t.jsx)(i.p,{children:"Figura 5.1: Vista de componentes del Servicio de Identidad"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"51-componentes-principales",children:"5.1 Componentes principales"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Componente"}),(0,t.jsx)(i.th,{children:"Responsabilidad"}),(0,t.jsx)(i.th,{children:"Tecnolog\xeda"}),(0,t.jsx)(i.th,{children:"Interfaces"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Keycloak Core"}),(0,t.jsx)(i.td,{children:"Proveedor de identidad multi-tenant (tenant/realm)"}),(0,t.jsx)(i.td,{children:"Keycloak 23+ (Docker oficial), PostgreSQL"}),(0,t.jsx)(i.td,{children:"OAuth2/OIDC, SAML, Admin API"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"PostgreSQL"}),(0,t.jsx)(i.td,{children:"Base de datos de identidades y configuraci\xf3n"}),(0,t.jsx)(i.td,{children:"PostgreSQL 15+"}),(0,t.jsx)(i.td,{children:"JDBC"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Auditor\xeda y Cumplimiento"}),(0,t.jsx)(i.td,{children:"Logging estructurado, cumplimiento normativo"}),(0,t.jsx)(i.td,{children:"Event Sourcing, ELK, Loki"}),(0,t.jsx)(i.td,{children:"Event Bus, REST"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Gateway Federaci\xf3n"}),(0,t.jsx)(i.td,{children:"Integraci\xf3n con IdPs externos"}),(0,t.jsx)(i.td,{children:"Conectores Keycloak"}),(0,t.jsx)(i.td,{children:"SAML, OIDC, LDAP"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Consola Administraci\xf3n"}),(0,t.jsx)(i.td,{children:"Interfaz administrativa"}),(0,t.jsx)(i.td,{children:"Keycloak Admin Console"}),(0,t.jsx)(i.td,{children:"Web UI, Admin API"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"52-relaciones-y-estructura",children:"5.2 Relaciones y estructura"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Keycloak se despliega como contenedor Docker oficial, conectado a una base de datos PostgreSQL dedicada."}),"\n",(0,t.jsx)(i.li,{children:"No se desarrollan componentes propios, se configura y extiende Keycloak mediante su consola y APIs."}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"53-principios-de-construcci\xf3n",children:"5.3 Principios de construcci\xf3n"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Uso de componentes est\xe1ndar y soportados por la comunidad."}),"\n",(0,t.jsx)(i.li,{children:"Separaci\xf3n de responsabilidades por componente."}),"\n",(0,t.jsx)(i.li,{children:"Multi-tenancy gestionado a nivel de tenant (realm) en Keycloak."}),"\n",(0,t.jsx)(i.li,{children:"Observabilidad y auditor\xeda integradas desde el dise\xf1o."}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"54-observabilidad-y-monitoreo",children:"5.4 Observabilidad y monitoreo"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"M\xe9tricas de autenticaci\xf3n, latencia y errores expuestas v\xeda Prometheus y visualizadas en Grafana."}),"\n",(0,t.jsx)(i.li,{children:"Logs estructurados centralizados en Loki y ELK Stack."}),"\n",(0,t.jsx)(i.li,{children:"Trazas distribuidas recolectadas con OpenTelemetry y visualizadas en Jaeger."}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"55-persistencia",children:"5.5 Persistencia"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Keycloak almacena toda la informaci\xf3n de identidades, configuraci\xf3n y sesiones en PostgreSQL usando su propio modelo de datos interno, el cual no es personalizado ni extendido por el equipo."}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"56-interfaces-externas",children:"5.6 Interfaces externas"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Servicio Integrado"}),(0,t.jsx)(i.th,{children:"Prop\xf3sito principal"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"API Gateway"}),(0,t.jsx)(i.td,{children:"Validaci\xf3n de tokens"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Notification Service"}),(0,t.jsx)(i.td,{children:"MFA, alertas"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Audit Service"}),(0,t.jsx)(i.td,{children:"Seguridad, eventos"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Corporate Services"}),(0,t.jsx)(i.td,{children:"Contexto de usuario"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Federation Partners"}),(0,t.jsx)(i.td,{children:"Integraci\xf3n IdPs externos"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Monitoring & Observability"}),(0,t.jsx)(i.td,{children:"M\xe9tricas, trazas, logs"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"57-ejemplos-t\xe9cnicos",children:"5.7 Ejemplos t\xe9cnicos"}),"\n",(0,t.jsx)(i.h3,{id:"obtenci\xf3n-de-token-de-acceso-oauth2oidc-client-credentials",children:"Obtenci\xf3n de token de acceso (OAuth2/OIDC client credentials)"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:"Ejemplo de autenticaci\xf3n m\xe1quina a m\xe1quina (M2M) usando el flujo client credentials de OAuth2/OIDC en Keycloak. Este flujo es utilizado por servicios o aplicaciones backend para obtener un token de acceso sin intervenci\xf3n de usuario, t\xedpico en integraciones API-to-API multi-tenant."})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Request:"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-http",children:"POST /realms/{tenant}/protocol/openid-connect/token\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=client_credentials&client_id=app-client&client_secret=secreto\n"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Response:"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",children:'{\n  "access_token": "...",\n  "expires_in": 900,\n  "refresh_expires_in": 900,\n  "token_type": "Bearer",\n  "scope": "profile email tenant:peru"\n}\n'})}),"\n",(0,t.jsx)(i.h2,{id:"58-referencias",children:"5.8 Referencias"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://www.keycloak.org/docs/latest/server_admin/",children:"Keycloak Server Administration Guide"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://www.keycloak.org/server/containers",children:"Keycloak Docker Image"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://www.postgresql.org/docs/",children:"PostgreSQL Documentation"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://docs.arc42.org/section-5/",children:"Arc42 Componentes de Construcci\xf3n"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://c4model.com/",children:"C4 Model for Software Architecture"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>d});var s=n(96540);const t={},r=s.createContext(t);function c(e){const i=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(r.Provider,{value:i},e.children)}},68171:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/identity_system-854b3ade0c77267c2418b8393ba8789b.png"}}]);