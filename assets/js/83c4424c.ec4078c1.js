"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[7288],{28453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>c});var r=n(96540);const s={},o=r.createContext(s);function a(e){const i=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:i},e.children)}},45135:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"servicios-corporativos/servicio-notificacion/vista-tiempo-ejecucion","title":"6. Vista De Tiempo De Ejecuci\xf3n","description":"6.1 Escenarios Principales","source":"@site/docs/servicios-corporativos/servicio-notificacion/06-vista-tiempo-ejecucion.md","sourceDirName":"servicios-corporativos/servicio-notificacion","slug":"/servicios-corporativos/servicio-notificacion/vista-tiempo-ejecucion","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-tiempo-ejecucion","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/servicio-notificacion/06-vista-tiempo-ejecucion.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"5. Vista De Bloques De Construcci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-bloques-construccion"},"next":{"title":"7. Vista De Implementaci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-implementacion"}}');var s=n(74848),o=n(28453);const a={},c="6. Vista De Tiempo De Ejecuci\xf3n",t={},l=[{value:"6.1 Escenarios Principales",id:"61-escenarios-principales",level:2},{value:"6.2 Patrones De Interacci\xf3n",id:"62-patrones-de-interacci\xf3n",level:2},{value:"6.3 Escenario: Env\xedo Transaccional Individual",id:"63-escenario-env\xedo-transaccional-individual",level:2},{value:"Participantes",id:"participantes",level:3},{value:"Flujo Principal",id:"flujo-principal",level:3},{value:"Aspectos Notables",id:"aspectos-notables",level:3},{value:"M\xe9tricas De Rendimiento",id:"m\xe9tricas-de-rendimiento",level:3},{value:"6.4 Escenario: Failover y Recuperaci\xf3n",id:"64-escenario-failover-y-recuperaci\xf3n",level:2},{value:"Participantes",id:"participantes-1",level:3},{value:"Flujo de Ejecuci\xf3n",id:"flujo-de-ejecuci\xf3n",level:3},{value:"Pol\xedticas de Recuperaci\xf3n",id:"pol\xedticas-de-recuperaci\xf3n",level:3},{value:"6.14 Consideraciones Generales",id:"614-consideraciones-generales",level:2}];function d(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"6-vista-de-tiempo-de-ejecuci\xf3n",children:"6. Vista De Tiempo De Ejecuci\xf3n"})}),"\n",(0,s.jsx)(i.h2,{id:"61-escenarios-principales",children:"6.1 Escenarios Principales"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Escenario"}),(0,s.jsx)(i.th,{children:"Flujo"}),(0,s.jsx)(i.th,{children:"Componentes"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Env\xedo inmediato"}),(0,s.jsx)(i.td,{children:"Notification API \u2192 ingestionQueue \u2192 notificationProcessor \u2192 Notification Database \u2192 [Colas de Canal] \u2192 [Procesadores de Canal] \u2192 Proveedor Externo \u2192 Notification Database"}),(0,s.jsx)(i.td,{children:"Notification API, ingestionQueue, notificationProcessor, Notification Database, emailQueue, smsQueue, whatsappQueue, pushQueue, emailProcessor, smsProcessor, whatsappProcessor, pushProcessor, Attachment Storage"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Env\xedo programado"}),(0,s.jsx)(i.td,{children:"Notification API \u2192 Notification Scheduler \u2192 ingestionQueue \u2192 notificationProcessor \u2192 Notification Database \u2192 [Colas de Canal] \u2192 [Procesadores de Canal] \u2192 Proveedor Externo \u2192 Notification Database"}),(0,s.jsx)(i.td,{children:"Notification API, Notification Scheduler, ingestionQueue, notificationProcessor, Notification Database, emailQueue, smsQueue, whatsappQueue, pushQueue, emailProcessor, smsProcessor, whatsappProcessor, pushProcessor"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Procesamiento plantilla"}),(0,s.jsx)(i.td,{children:"Notification API \u2192 notificationProcessor \u2192 Notification Database \u2192 [Colas de Canal] \u2192 [Procesadores de Canal] \u2192 Proveedor Externo \u2192 Notification Database"}),(0,s.jsx)(i.td,{children:"Notification API, notificationProcessor, Notification Database, emailQueue, smsQueue, whatsappQueue, pushQueue, emailProcessor, smsProcessor, whatsappProcessor, pushProcessor"})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"62-patrones-de-interacci\xf3n",children:"6.2 Patrones De Interacci\xf3n"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Patr\xf3n"}),(0,s.jsx)(i.th,{children:"Descripci\xf3n"}),(0,s.jsx)(i.th,{children:"Tecnolog\xeda"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"CQRS"}),(0,s.jsx)(i.td,{children:"Separaci\xf3n comando/consulta"}),(0,s.jsx)(i.td,{children:"Notification API, notificationProcessor, emailProcessor, smsProcessor, whatsappProcessor, pushProcessor"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Queue"}),(0,s.jsx)(i.td,{children:"Cola de mensajes"}),(0,s.jsx)(i.td,{children:"ingestionQueue, emailQueue, smsQueue, whatsappQueue, pushQueue"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Template"}),(0,s.jsx)(i.td,{children:"Procesamiento de plantillas"}),(0,s.jsx)(i.td,{children:"Template Engine"})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"Esta secci\xf3n describe los principales escenarios de ejecuci\xf3n del sistema, mostrando c\xf3mo los componentes interact\xfaan durante el tiempo de ejecuci\xf3n para cumplir con los casos de uso m\xe1s relevantes arquitect\xf3nicamente."}),"\n",(0,s.jsx)(i.h2,{id:"63-escenario-env\xedo-transaccional-individual",children:"6.3 Escenario: Env\xedo Transaccional Individual"}),"\n",(0,s.jsx)(i.h3,{id:"participantes",children:"Participantes"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Cliente"}),"\n",(0,s.jsx)(i.li,{children:"Notification API"}),"\n",(0,s.jsx)(i.li,{children:"ingestionQueue"}),"\n",(0,s.jsx)(i.li,{children:"notificationProcessor"}),"\n",(0,s.jsx)(i.li,{children:"Notification Database"}),"\n",(0,s.jsx)(i.li,{children:"Colas de Canal (emailQueue, smsQueue, whatsappQueue, pushQueue)"}),"\n",(0,s.jsx)(i.li,{children:"Procesadores de Canal (emailProcessor, smsProcessor, whatsappProcessor, pushProcessor)"}),"\n",(0,s.jsx)(i.li,{children:"Proveedor Externo"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"flujo-principal",children:"Flujo Principal"}),"\n",(0,s.jsx)(i.mermaid,{value:"sequenceDiagram\n    participant Cliente as Cliente\n    participant API as Notification API\n    participant Ingestion as ingestionQueue\n    participant Processor as Notification Processor\n    participant DB as Notification Database\n    participant ColasCanal as Colas de Canal\n    participant ProcCanal as Procesadores de Canal\n    participant Proveedor as Proveedor Externo\n\n    Cliente->>API: 1. Solicita env\xedo de notificaci\xf3n\n    API->>API: 2.1. Valida datos de la solicitud\n    API->>API: 2.2. Autentica y autoriza al cliente\n    API->>API: 2.3. Construye mensaje de notificaci\xf3n\n    API->>Ingestion: 3. Publica mensaje en ingestionQueue\n    API->>Cliente: 4. Confirma recepci\xf3n (HTTP 202)\n\n    Ingestion->>Processor: 5. Notification Processor consume mensaje\n    Processor->>Processor: 5.1. Valida reglas de negocio\n    Processor->>Processor: 5.2. Determina canales y tipos de notificaci\xf3n\n    Processor->>Processor: 5.3. Genera mensaje mediante plantilla seg\xfan tipo de notificaci\xf3n\n    Processor->>DB: 6. Registra notificaci\xf3n\n    Processor->>ColasCanal: 7. Encola mensajes generados en colas por canal\n    ColasCanal->>ProcCanal: 8. Procesadores de canal consumen mensaje\n    ProcCanal->>ProcCanal: 8.1. Aplica l\xf3gica de canal (formato, reintentos, etc.)\n    ProcCanal->>Proveedor: 9. Env\xedan notificaci\xf3n a Proveedor Externo\n    Proveedor->>ProcCanal: 10. Confirman entrega\n    ProcCanal->>DB: 11. Actualizan estado final"}),"\n",(0,s.jsx)(i.h3,{id:"aspectos-notables",children:"Aspectos Notables"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Notification Processor registra el evento inicial en Notification Database"}),"\n",(0,s.jsx)(i.li,{children:"Notification Processor genera mensajes usando plantillas por canal y tipo de notificaci\xf3n"}),"\n",(0,s.jsx)(i.li,{children:"Los Procesadores de Canal actualizan el estado final en Notification Database tras el env\xedo"}),"\n",(0,s.jsx)(i.li,{children:"Procesamiento paralelo y desacoplado por canal"}),"\n",(0,s.jsx)(i.li,{children:"Los nombres de los componentes coinciden exactamente con el DSL"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"m\xe9tricas-de-rendimiento",children:"M\xe9tricas De Rendimiento"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"M\xe9trica"}),(0,s.jsx)(i.th,{children:"Target"}),(0,s.jsx)(i.th,{children:"Medici\xf3n"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"API Response Time"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"p95 < 100ms"})}),(0,s.jsx)(i.td,{children:"Monitoreo APM"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"Event Processing"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"< 500ms"})}),(0,s.jsx)(i.td,{children:"M\xe9tricas personalizadas"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"End-to-End Delivery"})}),(0,s.jsxs)(i.td,{children:[(0,s.jsx)(i.code,{children:"< 30s"})," (transactional)"]}),(0,s.jsx)(i.td,{children:"M\xe9tricas de negocio"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"Capacidad de procesamiento"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"10K req/min/instancia"})}),(0,s.jsx)(i.td,{children:"Pruebas de carga"})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"64-escenario-failover-y-recuperaci\xf3n",children:"6.4 Escenario: Failover y Recuperaci\xf3n"}),"\n",(0,s.jsx)(i.h3,{id:"participantes-1",children:"Participantes"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Email Processor/SMS Processor/WhatsApp Processor/Push Processor"}),"\n",(0,s.jsx)(i.li,{children:"Proveedor Externo Primario"}),"\n",(0,s.jsx)(i.li,{children:"Proveedor Externo Secundario"}),"\n",(0,s.jsx)(i.li,{children:"Circuit Breaker"}),"\n",(0,s.jsx)(i.li,{children:"Health Check"}),"\n",(0,s.jsx)(i.li,{children:"Notification Database"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"flujo-de-ejecuci\xf3n",children:"Flujo de Ejecuci\xf3n"}),"\n",(0,s.jsx)(i.mermaid,{value:"sequenceDiagram\n    participant Processor as Email Processor\n    participant ProveedorPrimario as Proveedor Externo Primario\n    participant ProveedorSecundario as Proveedor Externo Secundario\n    participant CircuitBreaker as Circuit Breaker\n    participant HealthCheck as Health Check\n    participant DB as Notification Database\n\n    Processor->>ProveedorPrimario: 1. Enviar notificaci\xf3n\n    ProveedorPrimario--\x3e>Processor: 2. Timeout/Error\n    Processor->>CircuitBreaker: 3. Registrar fallo\n    CircuitBreaker->>CircuitBreaker: 4. Abrir circuito tras 5 fallos\n    Processor->>ProveedorSecundario: 5. Failover a secundario\n    ProveedorSecundario->>Processor: 6. Respuesta exitosa\n    Processor->>DB: 7. Actualizar estado en Notification Database\n\n    HealthCheck->>ProveedorPrimario: 8. Health check\n    ProveedorPrimario->>HealthCheck: 9. Servicio restaurado\n    HealthCheck->>CircuitBreaker: 10. Resetear circuito"}),"\n",(0,s.jsx)(i.h3,{id:"pol\xedticas-de-recuperaci\xf3n",children:"Pol\xedticas de Recuperaci\xf3n"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Circuit breaker: 5 fallos consecutivos"}),"\n",(0,s.jsx)(i.li,{children:"Timeout: 30 segundos por proveedor"}),"\n",(0,s.jsx)(i.li,{children:"Health check: Cada 60 segundos"}),"\n",(0,s.jsx)(i.li,{children:"Recuperaci\xf3n autom\xe1tica: Cuando el proveedor responde"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"614-consideraciones-generales",children:"6.14 Consideraciones Generales"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Reintentos autom\xe1ticos ante fallos de canal"}),"\n",(0,s.jsx)(i.li,{children:"Trazabilidad de cada mensaje"}),"\n",(0,s.jsx)(i.li,{children:"Aislamiento multi-tenant en cada paso"}),"\n",(0,s.jsx)(i.li,{children:"Logs estructurados para auditor\xeda"}),"\n"]})]})}function u(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);