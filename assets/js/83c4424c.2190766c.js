"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[7288],{28453:(e,i,s)=>{s.d(i,{R:()=>r,x:()=>a});var c=s(96540);const n={},o=c.createContext(n);function r(e){const i=c.useContext(o);return c.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),c.createElement(o.Provider,{value:i},e.children)}},45135:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>t});const c=JSON.parse('{"id":"servicios-corporativos/servicio-notificacion/vista-tiempo-ejecucion","title":"6. Vista De Tiempo De Ejecuci\xf3n","description":"6.1 Escenarios Principales","source":"@site/docs/servicios-corporativos/servicio-notificacion/06-vista-tiempo-ejecucion.md","sourceDirName":"servicios-corporativos/servicio-notificacion","slug":"/servicios-corporativos/servicio-notificacion/vista-tiempo-ejecucion","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-tiempo-ejecucion","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/servicio-notificacion/06-vista-tiempo-ejecucion.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"5. Vista De Bloques De Construcci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-bloques-construccion"},"next":{"title":"7. Vista De Implementaci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-implementacion"}}');var n=s(74848),o=s(28453);const r={},a="6. Vista De Tiempo De Ejecuci\xf3n",d={},t=[{value:"6.1 Escenarios Principales",id:"61-escenarios-principales",level:2},{value:"6.2 Patrones De Interacci\xf3n",id:"62-patrones-de-interacci\xf3n",level:2},{value:"6.3 Escenario: Env\xedo Transaccional Individual",id:"63-escenario-env\xedo-transaccional-individual",level:2},{value:"Participantes",id:"participantes",level:3},{value:"Flujo Principal",id:"flujo-principal",level:3},{value:"Aspectos Notables",id:"aspectos-notables",level:3},{value:"6.4 M\xe9tricas De Ejecuci\xf3n",id:"64-m\xe9tricas-de-ejecuci\xf3n",level:2}];function l(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"6-vista-de-tiempo-de-ejecuci\xf3n",children:"6. Vista De Tiempo De Ejecuci\xf3n"})}),"\n",(0,n.jsx)(i.h2,{id:"61-escenarios-principales",children:"6.1 Escenarios Principales"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Escenario"}),(0,n.jsx)(i.th,{children:"Flujo"}),(0,n.jsx)(i.th,{children:"Componentes"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Env\xedo inmediato"}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"Notification API"})," \u2192 ",(0,n.jsx)(i.code,{children:"ingestionQueue"})," \u2192 ",(0,n.jsx)(i.code,{children:"notificationProcessor"})," \u2192 ",(0,n.jsx)(i.code,{children:"Notification Database"})," \u2192 [Colas de Canal] \u2192 [Procesadores de Canal] \u2192 Proveedor Externo \u2192 ",(0,n.jsx)(i.code,{children:"Notification Database"})]}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"Notification API"}),", ",(0,n.jsx)(i.code,{children:"ingestionQueue"}),", ",(0,n.jsx)(i.code,{children:"notificationProcessor"}),", ",(0,n.jsx)(i.code,{children:"Notification Database"}),", ",(0,n.jsx)(i.code,{children:"emailQueue"}),", ",(0,n.jsx)(i.code,{children:"smsQueue"}),", ",(0,n.jsx)(i.code,{children:"whatsappQueue"}),", ",(0,n.jsx)(i.code,{children:"pushQueue"}),", ",(0,n.jsx)(i.code,{children:"emailProcessor"}),", ",(0,n.jsx)(i.code,{children:"smsProcessor"}),", ",(0,n.jsx)(i.code,{children:"whatsappProcessor"}),", ",(0,n.jsx)(i.code,{children:"pushProcessor"}),", ",(0,n.jsx)(i.code,{children:"Attachment Storage"})]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Env\xedo programado"}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"Notification API"})," \u2192 ",(0,n.jsx)(i.code,{children:"Notification Scheduler"})," \u2192 ",(0,n.jsx)(i.code,{children:"ingestionQueue"})," \u2192 ",(0,n.jsx)(i.code,{children:"notificationProcessor"})," \u2192 ",(0,n.jsx)(i.code,{children:"Notification Database"})," \u2192 [Colas de Canal] \u2192 [Procesadores de Canal] \u2192 Proveedor Externo \u2192 ",(0,n.jsx)(i.code,{children:"Notification Database"})]}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"Notification API"}),", ",(0,n.jsx)(i.code,{children:"Notification Scheduler"}),", ",(0,n.jsx)(i.code,{children:"ingestionQueue"}),", ",(0,n.jsx)(i.code,{children:"notificationProcessor"}),", ",(0,n.jsx)(i.code,{children:"Notification Database"}),", ",(0,n.jsx)(i.code,{children:"emailQueue"}),", ",(0,n.jsx)(i.code,{children:"smsQueue"}),", ",(0,n.jsx)(i.code,{children:"whatsappQueue"}),", ",(0,n.jsx)(i.code,{children:"pushQueue"}),", ",(0,n.jsx)(i.code,{children:"emailProcessor"}),", ",(0,n.jsx)(i.code,{children:"smsProcessor"}),", ",(0,n.jsx)(i.code,{children:"whatsappProcessor"}),", ",(0,n.jsx)(i.code,{children:"pushProcessor"})]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Procesamiento plantilla"}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"Notification API"})," \u2192 ",(0,n.jsx)(i.code,{children:"notificationProcessor"})," \u2192 ",(0,n.jsx)(i.code,{children:"Notification Database"})," \u2192 [Colas de Canal] \u2192 [Procesadores de Canal] \u2192 Proveedor Externo \u2192 ",(0,n.jsx)(i.code,{children:"Notification Database"})]}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"Notification API"}),", ",(0,n.jsx)(i.code,{children:"notificationProcessor"}),", ",(0,n.jsx)(i.code,{children:"Notification Database"}),", ",(0,n.jsx)(i.code,{children:"emailQueue"}),", ",(0,n.jsx)(i.code,{children:"smsQueue"}),", ",(0,n.jsx)(i.code,{children:"whatsappQueue"}),", ",(0,n.jsx)(i.code,{children:"pushQueue"}),", ",(0,n.jsx)(i.code,{children:"emailProcessor"}),", ",(0,n.jsx)(i.code,{children:"smsProcessor"}),", ",(0,n.jsx)(i.code,{children:"whatsappProcessor"}),", ",(0,n.jsx)(i.code,{children:"pushProcessor"})]})]})]})]}),"\n",(0,n.jsx)(i.h2,{id:"62-patrones-de-interacci\xf3n",children:"6.2 Patrones De Interacci\xf3n"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Patr\xf3n"}),(0,n.jsx)(i.th,{children:"Descripci\xf3n"}),(0,n.jsx)(i.th,{children:"Tecnolog\xeda / Componente"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"CQRS"})}),(0,n.jsx)(i.td,{children:"Separaci\xf3n comando/consulta"}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"Notification API"}),", ",(0,n.jsx)(i.code,{children:"notificationProcessor"}),", ",(0,n.jsx)(i.code,{children:"emailProcessor"}),", ",(0,n.jsx)(i.code,{children:"smsProcessor"}),", ",(0,n.jsx)(i.code,{children:"whatsappProcessor"}),", ",(0,n.jsx)(i.code,{children:"pushProcessor"})]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Queue"})}),(0,n.jsx)(i.td,{children:"Cola de mensajes"}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"ingestionQueue"}),", ",(0,n.jsx)(i.code,{children:"emailQueue"}),", ",(0,n.jsx)(i.code,{children:"smsQueue"}),", ",(0,n.jsx)(i.code,{children:"whatsappQueue"}),", ",(0,n.jsx)(i.code,{children:"pushQueue"})]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Template"})}),(0,n.jsx)(i.td,{children:"Procesamiento de plantillas"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Template Engine"})})]})]})]}),"\n",(0,n.jsx)(i.p,{children:"Esta secci\xf3n describe los principales escenarios de ejecuci\xf3n del sistema, mostrando c\xf3mo los componentes interact\xfaan durante el tiempo de ejecuci\xf3n para cumplir con los casos de uso m\xe1s relevantes arquitect\xf3nicamente. Se priorizan la resiliencia, el desacoplamiento, la deduplicaci\xf3n, la idempotencia y la observabilidad en todos los flujos."}),"\n",(0,n.jsx)(i.h2,{id:"63-escenario-env\xedo-transaccional-individual",children:"6.3 Escenario: Env\xedo Transaccional Individual"}),"\n",(0,n.jsx)(i.h3,{id:"participantes",children:"Participantes"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"Cliente"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"Notification API"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"ingestionQueue"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"notificationProcessor"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"Notification Database"})}),"\n",(0,n.jsxs)(i.li,{children:["Colas de Canal (",(0,n.jsx)(i.code,{children:"emailQueue"}),", ",(0,n.jsx)(i.code,{children:"smsQueue"}),", ",(0,n.jsx)(i.code,{children:"whatsappQueue"}),", ",(0,n.jsx)(i.code,{children:"pushQueue"}),")"]}),"\n",(0,n.jsxs)(i.li,{children:["Procesadores de Canal (",(0,n.jsx)(i.code,{children:"emailProcessor"}),", ",(0,n.jsx)(i.code,{children:"smsProcessor"}),", ",(0,n.jsx)(i.code,{children:"whatsappProcessor"}),", ",(0,n.jsx)(i.code,{children:"pushProcessor"}),")"]}),"\n",(0,n.jsx)(i.li,{children:"Proveedor Externo"}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"flujo-principal",children:"Flujo Principal"}),"\n",(0,n.jsx)(i.mermaid,{value:"sequenceDiagram\n    participant Cliente as Cliente\n    participant API as Notification API\n    participant Ingestion as ingestionQueue\n    participant Processor as Notification Processor\n    participant DB as Notification Database\n    participant ColasCanal as Colas de Canal\n    participant ProcCanal as Procesadores de Canal\n    participant Proveedor as Proveedor Externo\n\n    Cliente->>API: 1. Solicita env\xedo de notificaci\xf3n\n    API->>API: 2.1. Valida datos de la solicitud\n    API->>API: 2.2. Autentica y autoriza al cliente\n    API->>API: 2.3. Construye mensaje de notificaci\xf3n\n    API->>Ingestion: 3. Publica mensaje en ingestionQueue\n    API->>Cliente: 4. Confirma recepci\xf3n (`HTTP 202`)\n\n    Ingestion->>Processor: 5. Notification Processor consume mensaje\n    Processor->>Processor: 5.1. Valida reglas de negocio\n    Processor->>Processor: 5.2. Determina canales y tipos de notificaci\xf3n\n    Processor->>Processor: 5.3. Genera mensaje mediante plantilla seg\xfan tipo de notificaci\xf3n\n    Processor->>DB: 6. Registra notificaci\xf3n\n    Processor->>ColasCanal: 7. Encola mensajes generados en colas por canal\n    ColasCanal->>ProcCanal: 8. Procesadores de canal consumen mensaje\n    ProcCanal->>Proveedor: 9. Env\xeda notificaci\xf3n al proveedor externo\n    ProcCanal->>DB: 10. Actualiza estado final"}),"\n",(0,n.jsx)(i.h3,{id:"aspectos-notables",children:"Aspectos Notables"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"El flujo implementa desacoplamiento total entre recepci\xf3n, procesamiento y entrega mediante colas y procesadores independientes."}),"\n",(0,n.jsxs)(i.li,{children:["La deduplicaci\xf3n e idempotencia se garantizan en la ",(0,n.jsx)(i.code,{children:"Notification API"})," y en los procesadores de canal."]}),"\n",(0,n.jsxs)(i.li,{children:["La observabilidad se implementa con logs estructurados (",(0,n.jsx)(i.code,{children:"Serilog"}),"), m\xe9tricas (",(0,n.jsx)(i.code,{children:"Prometheus"}),") y trazas distribuidas (",(0,n.jsx)(i.code,{children:"OpenTelemetry"}),")."]}),"\n",(0,n.jsxs)(i.li,{children:["La resiliencia se logra mediante reintentos autom\xe1ticos, ",(0,n.jsx)(i.code,{children:"DLQ"})," y fallback de proveedores."]}),"\n",(0,n.jsx)(i.li,{children:"Todos los nombres y responsabilidades de los componentes coinciden con el DSL."}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"64-m\xe9tricas-de-ejecuci\xf3n",children:"6.4 M\xe9tricas De Ejecuci\xf3n"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"M\xe9trica"}),(0,n.jsx)(i.th,{children:"Target"}),(0,n.jsx)(i.th,{children:"Medici\xf3n"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"API Response Time"})}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"p95 < 100ms"})}),(0,n.jsx)(i.td,{children:"Monitoreo APM"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Event Processing"})}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"< 500ms"})}),(0,n.jsx)(i.td,{children:"M\xe9tricas personalizadas"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"End-to-End Delivery"})}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"< 30s"})," (transactional)"]}),(0,n.jsx)(i.td,{children:"M\xe9tricas de negocio"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Capacidad de procesamiento"})}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"10K req/min/instancia"})}),(0,n.jsx)(i.td,{children:"Pruebas de carga"})]})]})]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Notas:"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"El sistema est\xe1 dise\xf1ado para soportar picos de tr\xe1fico, garantizar entrega \xfanica y trazabilidad completa."}),"\n",(0,n.jsx)(i.li,{children:"El desacoplamiento y la resiliencia permiten tolerancia a fallos y recuperaci\xf3n autom\xe1tica ante errores de proveedores."}),"\n",(0,n.jsx)(i.li,{children:"La arquitectura prioriza la observabilidad y la entrega \xfanica en todos los escenarios."}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}}}]);