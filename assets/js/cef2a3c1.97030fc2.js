"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[4247],{28453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>c});var s=n(96540);const r={},d=s.createContext(r);function t(e){const i=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(d.Provider,{value:i},e.children)}},32213:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"adrs/adr-016-logging-estructurado","title":"ADR-016: Logging Estructurado","description":"\u2705 ESTADO","source":"@site/docs/adrs/adr-016-logging-estructurado.md","sourceDirName":"adrs","slug":"/adrs/adr-016-logging-estructurado","permalink":"/tlm-doc-architecture/docs/adrs/adr-016-logging-estructurado","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/adrs/adr-016-logging-estructurado.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"title":"ADR-016: Logging Estructurado","sidebar_position":16},"sidebar":"tutorialSidebar","previous":{"title":"ADR-015: Manejo de Errores en Cola","permalink":"/tlm-doc-architecture/docs/adrs/adr-015-manejo-errores-cola"},"next":{"title":"ADR-017: Versionado de APIs","permalink":"/tlm-doc-architecture/docs/adrs/adr-017-versionado-apis"}}');var r=n(74848),d=n(28453);const t={title:"ADR-016: Logging Estructurado",sidebar_position:16},c=void 0,l={},o=[{value:"\u2705 ESTADO",id:"-estado",level:2},{value:"\ud83d\uddfa\ufe0f CONTEXTO",id:"\ufe0f-contexto",level:2},{value:"\ud83d\udd0d COMPARATIVA DE ALTERNATIVAS",id:"-comparativa-de-alternativas",level:2},{value:"Comparativa Cualitativa",id:"comparativa-cualitativa",level:3},{value:"Matriz de Decisi\xf3n",id:"matriz-de-decisi\xf3n",level:3},{value:"\ud83d\udcb0 AN\xc1LISIS DE COSTOS (TCO 3 a\xf1os)",id:"-an\xe1lisis-de-costos-tco-3-a\xf1os",level:2},{value:"Consideraciones t\xe9cnicas y riesgos",id:"consideraciones-t\xe9cnicas-y-riesgos",level:2},{value:"L\xedmites clave",id:"l\xedmites-clave",level:3},{value:"Riesgos y mitigaci\xf3n",id:"riesgos-y-mitigaci\xf3n",level:3},{value:"\u2714\ufe0f DECISI\xd3N",id:"\ufe0f-decisi\xf3n",level:2},{value:"Justificaci\xf3n",id:"justificaci\xf3n",level:2},{value:"Alternativas descartadas",id:"alternativas-descartadas",level:2},{value:"\u26a0\ufe0f CONSECUENCIAS",id:"\ufe0f-consecuencias",level:2},{value:"\ud83d\udcda REFERENCIAS",id:"-referencias",level:2}];function a(e){const i={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"-estado",children:"\u2705 ESTADO"}),"\n",(0,r.jsx)(i.p,{children:"Aceptada \u2013 Agosto 2025"}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"\ufe0f-contexto",children:"\ud83d\uddfa\ufe0f CONTEXTO"}),"\n",(0,r.jsx)(i.p,{children:"Los servicios corporativos multi-tenant requieren una soluci\xf3n de logging que permita:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Logging estructurado"})," (JSON) para an\xe1lisis automatizado"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Correlaci\xf3n distribuida"})," entre microservicios con trace IDs"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Multi-tenancy"})," con segregaci\xf3n de logs por pa\xeds/tenant"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Centralizaci\xf3n"})," para an\xe1lisis y alertas unificadas"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Retenci\xf3n configurable"})," por tipo de log y compliance"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Performance"})," bajo alta carga sin impacto en latencia"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Ecosistema .NET"})," nativo con ASP.NET Core y Entity Framework"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Sinks agn\xf3sticos"})," para evitar lock-in"]}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["La estrategia prioriza ",(0,r.jsx)(i.strong,{children:"flexibilidad, observabilidad y simplicidad operativa"})," usando tecnolog\xedas y patrones aprobados."]}),"\n",(0,r.jsx)(i.p,{children:"Alternativas evaluadas:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Serilog"})," (estructurado, .NET, ecosistema extenso)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"OpenTelemetry Logging"})," (est\xe1ndar CNCF, emergente)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"NLog"})," (tradicional, .NET)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Microsoft.Extensions.Logging"})," (nativo .NET, b\xe1sico)"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-comparativa-de-alternativas",children:"\ud83d\udd0d COMPARATIVA DE ALTERNATIVAS"}),"\n",(0,r.jsx)(i.h3,{id:"comparativa-cualitativa",children:"Comparativa Cualitativa"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Criterio"}),(0,r.jsx)(i.th,{children:"Serilog"}),(0,r.jsx)(i.th,{children:"OpenTelemetry Logging"}),(0,r.jsx)(i.th,{children:"NLog"}),(0,r.jsx)(i.th,{children:"MS.Extensions.Logging"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Logging estructurado"})}),(0,r.jsx)(i.td,{children:"\u2705 Nativo, JSON"}),(0,r.jsx)(i.td,{children:"\u2705 Est\xe1ndar CNCF"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 Configurable"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 B\xe1sico"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Ecosistema .NET"})}),(0,r.jsx)(i.td,{children:"\u2705 Excelente"}),(0,r.jsx)(i.td,{children:"\u2705 Oficial"}),(0,r.jsx)(i.td,{children:"\u2705 Muy maduro"}),(0,r.jsx)(i.td,{children:"\u2705 Nativo"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Sinks/Destinos"})}),(0,r.jsx)(i.td,{children:"\u2705 200+ sinks"}),(0,r.jsx)(i.td,{children:"\u2705 Exporters extensos"}),(0,r.jsx)(i.td,{children:"\u2705 Muchos targets"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 Providers b\xe1sicos"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Rendimiento"})}),(0,r.jsx)(i.td,{children:"\u2705 Muy optimizado"}),(0,r.jsx)(i.td,{children:"\u2705 Bueno"}),(0,r.jsx)(i.td,{children:"\u2705 Excelente"}),(0,r.jsx)(i.td,{children:"\u2705 Bueno"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Multi-tenancy"})}),(0,r.jsx)(i.td,{children:"\u2705 Contexto enriquecido"}),(0,r.jsx)(i.td,{children:"\u2705 Contexto avanzado"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 Manual"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 Scopes b\xe1sicos"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Agnosticidad"})}),(0,r.jsx)(i.td,{children:"\u2705 Totalmente agn\xf3stico"}),(0,r.jsx)(i.td,{children:"\u2705 Est\xe1ndar abierto"}),(0,r.jsx)(i.td,{children:"\u2705 Totalmente agn\xf3stico"}),(0,r.jsx)(i.td,{children:"\u2705 Agn\xf3stico"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Madurez"})}),(0,r.jsx)(i.td,{children:"\u2705 Muy maduro, activo"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 Emergente"}),(0,r.jsx)(i.td,{children:"\u2705 Muy maduro"}),(0,r.jsx)(i.td,{children:"\u2705 Oficial"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"matriz-de-decisi\xf3n",children:"Matriz de Decisi\xf3n"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Soluci\xf3n"}),(0,r.jsx)(i.th,{children:"Estructurado"}),(0,r.jsx)(i.th,{children:"Ecosistema .NET"}),(0,r.jsx)(i.th,{children:"Sinks"}),(0,r.jsx)(i.th,{children:"Rendimiento"}),(0,r.jsx)(i.th,{children:"Recomendaci\xf3n"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Serilog"})}),(0,r.jsx)(i.td,{children:"Excelente"}),(0,r.jsx)(i.td,{children:"Excelente"}),(0,r.jsx)(i.td,{children:"Excelente"}),(0,r.jsx)(i.td,{children:"Excelente"}),(0,r.jsxs)(i.td,{children:["\u2705 ",(0,r.jsx)(i.strong,{children:"Seleccionada"})]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"OpenTelemetry Logging"})}),(0,r.jsx)(i.td,{children:"Excelente"}),(0,r.jsx)(i.td,{children:"Bueno"}),(0,r.jsx)(i.td,{children:"Extensos"}),(0,r.jsx)(i.td,{children:"Bueno"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 Alternativa"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"NLog"})}),(0,r.jsx)(i.td,{children:"Configurable"}),(0,r.jsx)(i.td,{children:"Muy maduro"}),(0,r.jsx)(i.td,{children:"Muchos"}),(0,r.jsx)(i.td,{children:"Excelente"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 Considerada"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"MS.Extensions.Logging"})}),(0,r.jsx)(i.td,{children:"B\xe1sico"}),(0,r.jsx)(i.td,{children:"Nativo"}),(0,r.jsx)(i.td,{children:"B\xe1sicos"}),(0,r.jsx)(i.td,{children:"Bueno"}),(0,r.jsx)(i.td,{children:"\ud83d\udfe1 Considerada"})]})]})]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"-an\xe1lisis-de-costos-tco-3-a\xf1os",children:"\ud83d\udcb0 AN\xc1LISIS DE COSTOS (TCO 3 a\xf1os)"}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Supuesto:"})," 5 servicios, 100GB logs/mes, retenci\xf3n 90 d\xedas. Costos estimados para almacenamiento, operaci\xf3n y monitoreo."]}),"\n"]}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Soluci\xf3n"}),(0,r.jsx)(i.th,{children:"Licenciamiento"}),(0,r.jsx)(i.th,{children:"Infraestructura"}),(0,r.jsx)(i.th,{children:"Operaci\xf3n"}),(0,r.jsx)(i.th,{children:"TCO 3 a\xf1os"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Serilog + Loki"}),(0,r.jsx)(i.td,{children:"OSS"}),(0,r.jsx)(i.td,{children:"US$4,800/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$15,000/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$59,400"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Serilog + ELK Stack"}),(0,r.jsx)(i.td,{children:"OSS"}),(0,r.jsx)(i.td,{children:"US$7,200/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$18,000/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$75,600"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Serilog + Seq"}),(0,r.jsx)(i.td,{children:"US$3,600/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$3,600/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$12,000/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$57,600"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"OpenTelemetry + Jaeger"}),(0,r.jsx)(i.td,{children:"OSS"}),(0,r.jsx)(i.td,{children:"US$6,000/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$24,000/a\xf1o"}),(0,r.jsx)(i.td,{children:"US$90,000"})]})]})]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"consideraciones-t\xe9cnicas-y-riesgos",children:"Consideraciones t\xe9cnicas y riesgos"}),"\n",(0,r.jsx)(i.h3,{id:"l\xedmites-clave",children:"L\xedmites clave"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Loki/ELK/Seq:"})," l\xedmites por volumen, retenci\xf3n y escalabilidad"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"OpenTelemetry:"})," integraci\xf3n emergente, requiere validaci\xf3n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"riesgos-y-mitigaci\xf3n",children:"Riesgos y mitigaci\xf3n"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Lock-in de sinks propietarios:"})," mitigado usando sinks OSS y configuraci\xf3n desacoplada"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Complejidad operativa ELK:"})," mitigada con automatizaci\xf3n y monitoreo"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Costos variables cloud:"})," monitoreo y revisi\xf3n anual"]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"\ufe0f-decisi\xf3n",children:"\u2714\ufe0f DECISI\xd3N"}),"\n",(0,r.jsxs)(i.p,{children:["Se selecciona ",(0,r.jsx)(i.strong,{children:"Serilog"})," como librer\xeda est\xe1ndar de logging estructurado para todos los servicios ",(0,r.jsx)(i.code,{children:".NET"})," del ecosistema corporativo."]}),"\n",(0,r.jsx)(i.h2,{id:"justificaci\xf3n",children:"Justificaci\xf3n"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Soporte nativo para sinks como consola, archivos, ",(0,r.jsx)(i.code,{children:"Loki"}),", ",(0,r.jsx)(i.code,{children:"Seq"}),", ",(0,r.jsx)(i.code,{children:"Elasticsearch"}),", etc."]}),"\n",(0,r.jsxs)(i.li,{children:["Logging estructurado (",(0,r.jsx)(i.code,{children:"JSON"}),") y enriquecimiento de logs"]}),"\n",(0,r.jsxs)(i.li,{children:["Integraci\xf3n sencilla con ",(0,r.jsx)(i.code,{children:"ASP.NET Core"})," y frameworks ",(0,r.jsx)(i.code,{children:".NET"})]}),"\n",(0,r.jsx)(i.li,{children:"Amplia comunidad y documentaci\xf3n"}),"\n",(0,r.jsxs)(i.li,{children:["Facilita integraci\xf3n con sistemas de monitoreo y observabilidad (",(0,r.jsx)(i.code,{children:"Prometheus"}),", ",(0,r.jsx)(i.code,{children:"Grafana"}),", ",(0,r.jsx)(i.code,{children:"Loki"}),", ",(0,r.jsx)(i.code,{children:"Jaeger"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Permite incluir informaci\xf3n de ",(0,r.jsx)(i.code,{children:"tenant"})," y ",(0,r.jsx)(i.code,{children:"pa\xeds"})," en los logs, facilitando trazabilidad y auditor\xeda multi-tenant"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"alternativas-descartadas",children:"Alternativas descartadas"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"NLog/log4net:"})," menor soporte para logging estructurado y sinks modernos"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"MS.Extensions.Logging:"})," funcionalidad b\xe1sica, no estructurado por defecto"]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"\ufe0f-consecuencias",children:"\u26a0\ufe0f CONSECUENCIAS"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Todos los servicios ",(0,r.jsx)(i.code,{children:".NET"})," deben implementar ",(0,r.jsx)(i.code,{children:"Serilog"})," para logging estructurado"]}),"\n",(0,r.jsxs)(i.li,{children:["Se debe estandarizar el formato y la gesti\xf3n de logs (",(0,r.jsx)(i.code,{children:"JSON"}),")"]}),"\n",(0,r.jsx)(i.li,{children:"El c\xf3digo debe desacoplarse de sinks propietarios mediante configuraci\xf3n"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"-referencias",children:"\ud83d\udcda REFERENCIAS"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://serilog.net/",children:"Serilog Docs"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://github.com/serilog/serilog/wiki/Provided-Sinks",children:"Serilog Sinks"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://opentelemetry.io/docs/instrumentation/net/logging/",children:"OpenTelemetry Logging"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://arc42.org/decision/",children:"arc42: Decisiones de arquitectura"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);