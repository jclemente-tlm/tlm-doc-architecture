"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[2677],{17462:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"servicios-corporativos/servicio-identidad/introduccion-objetivos","title":"1. Introducci\xf3n Y Objetivos Del Servicio De Identidad","description":"El Servicio de Identidad gestiona autenticaci\xf3n, autorizaci\xf3n y federaci\xf3n para servicios corporativos multipa\xeds. Implementa aislamiento multi-tenant (un tenant (realm) por pa\xeds), integraci\xf3n con sistemas cloud y legacy, y cumplimiento normativo internacional.","source":"@site/docs/servicios-corporativos/servicio-identidad/01-introduccion-objetivos.md","sourceDirName":"servicios-corporativos/servicio-identidad","slug":"/servicios-corporativos/servicio-identidad/introduccion-objetivos","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-identidad/introduccion-objetivos","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/servicio-identidad/01-introduccion-objetivos.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Servicio de Identidad","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-identidad"},"next":{"title":"2. Restricciones de la Arquitectura del Servicio de Identidad","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-identidad/restricciones-arquitectura"}}');var t=n(74848),d=n(28453);const s={},c="1. Introducci\xf3n Y Objetivos Del Servicio De Identidad",a={},l=[{value:"1.1 Prop\xf3sito Y Visi\xf3n",id:"11-prop\xf3sito-y-visi\xf3n",level:2},{value:"1.2 Funcionalidades Clave",id:"12-funcionalidades-clave",level:2},{value:"1.3 Atributos De Calidad",id:"13-atributos-de-calidad",level:2},{value:"1.4 Escenario Principal De Autenticaci\xf3n",id:"14-escenario-principal-de-autenticaci\xf3n",level:2},{value:"1.5 Multi-Tenancy Y Ciclo De Vida",id:"15-multi-tenancy-y-ciclo-de-vida",level:2},{value:"Ciclo De Vida De Usuarios",id:"ciclo-de-vida-de-usuarios",level:3},{value:"Integraci\xf3n Corporativa",id:"integraci\xf3n-corporativa",level:3},{value:"1.6 Tipos De Usuarios Y Roles",id:"16-tipos-de-usuarios-y-roles",level:2},{value:"1.7 Stakeholders",id:"17-stakeholders",level:2},{value:"1.8 Referencias",id:"18-referencias",level:2},{value:"1.9 Buenas Pr\xe1cticas y Fragmentos Reutilizables",id:"19-buenas-pr\xe1cticas-y-fragmentos-reutilizables",level:2},{value:"Ejemplo de JWT emitido por Keycloak (tenant/realm)",id:"ejemplo-de-jwt-emitido-por-keycloak-tenantrealm",level:3},{value:"Fragmento de configuraci\xf3n multi-tenant (realm) en .NET",id:"fragmento-de-configuraci\xf3n-multi-tenant-realm-en-net",level:3}];function o(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"1-introducci\xf3n-y-objetivos-del-servicio-de-identidad",children:"1. Introducci\xf3n Y Objetivos Del Servicio De Identidad"})}),"\n",(0,t.jsx)(i.p,{children:"El Servicio de Identidad gestiona autenticaci\xf3n, autorizaci\xf3n y federaci\xf3n para servicios corporativos multipa\xeds. Implementa aislamiento multi-tenant (un tenant (realm) por pa\xeds), integraci\xf3n con sistemas cloud y legacy, y cumplimiento normativo internacional."}),"\n",(0,t.jsx)(i.h2,{id:"11-prop\xf3sito-y-visi\xf3n",children:"1.1 Prop\xf3sito Y Visi\xf3n"}),"\n",(0,t.jsx)(i.p,{children:"Proveer un n\xfacleo de identidad seguro, escalable y centralizado, soportando gesti\xf3n de usuarios, autenticaci\xf3n federada, control de acceso basado en roles y observabilidad integral."}),"\n",(0,t.jsx)(i.h2,{id:"12-funcionalidades-clave",children:"1.2 Funcionalidades Clave"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Funcionalidad"}),(0,t.jsx)(i.th,{children:"Descripci\xf3n t\xe9cnica"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"SSO"}),(0,t.jsxs)(i.td,{children:["Single Sign-On (",(0,t.jsx)(i.code,{children:"OAuth2"}),"/",(0,t.jsx)(i.code,{children:"OIDC"}),", ",(0,t.jsx)(i.code,{children:"JWT"}),")"]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Multi-tenant"}),(0,t.jsx)(i.td,{children:"Aislamiento y gesti\xf3n por tenant (realm)"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Federaci\xf3n"}),(0,t.jsxs)(i.td,{children:["Integraci\xf3n con IdPs externos (",(0,t.jsx)(i.code,{children:"SAML"}),", ",(0,t.jsx)(i.code,{children:"OIDC"}),", ",(0,t.jsx)(i.code,{children:"LDAP"}),")"]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"RBAC"}),(0,t.jsx)(i.td,{children:"Control de acceso centralizado"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"MFA"}),(0,t.jsx)(i.td,{children:"Autenticaci\xf3n multi-factor"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Auditor\xeda"}),(0,t.jsx)(i.td,{children:"Logging estructurado, cumplimiento"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Observabilidad"}),(0,t.jsxs)(i.td,{children:["M\xe9tricas (",(0,t.jsx)(i.code,{children:"Prometheus"}),"), trazas (",(0,t.jsx)(i.code,{children:"Jaeger"}),"), logs (",(0,t.jsx)(i.code,{children:"Loki"}),", ",(0,t.jsx)(i.code,{children:"Serilog"}),")"]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"API Gateway"}),(0,t.jsx)(i.td,{children:"Validaci\xf3n de tokens, forwarding seguro"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"13-atributos-de-calidad",children:"1.3 Atributos De Calidad"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Atributo"}),(0,t.jsx)(i.th,{children:"Objetivo"}),(0,t.jsx)(i.th,{children:"M\xe9trica"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Disponibilidad"}),(0,t.jsx)(i.td,{children:"Alta disponibilidad"}),(0,t.jsx)(i.td,{children:"99.9% uptime"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Rendimiento"}),(0,t.jsx)(i.td,{children:"Baja latencia"}),(0,t.jsx)(i.td,{children:"p95 < 200ms"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Escalabilidad"}),(0,t.jsx)(i.td,{children:"Soporte masivo"}),(0,t.jsx)(i.td,{children:"10,000+ usuarios"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Seguridad"}),(0,t.jsx)(i.td,{children:"Zero trust, GDPR"}),(0,t.jsx)(i.td,{children:"100% eventos auditados"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Usabilidad"}),(0,t.jsx)(i.td,{children:"SSO fluido"}),(0,t.jsx)(i.td,{children:"< 3 clics acceso"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Mantenibilidad"}),(0,t.jsx)(i.td,{children:"Gesti\xf3n \xe1gil"}),(0,t.jsx)(i.td,{children:"Self-service > 80%"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"14-escenario-principal-de-autenticaci\xf3n",children:"1.4 Escenario Principal De Autenticaci\xf3n"}),"\n",(0,t.jsx)(i.mermaid,{value:"sequenceDiagram\n    participant Usuario\n    participant App\n    participant Gateway\n    participant Keycloak\n    participant Audit\n    App->>Gateway: Solicita acceso\n    Gateway->>Keycloak: Redirecci\xf3n a login\n    Usuario->>Keycloak: Ingresa credenciales\n    Keycloak->>Keycloak: Valida credenciales\n    Keycloak->>Audit: LOG: LOGIN_ATTEMPT\n    Keycloak->>Gateway: Retorna JWT token\n    Gateway->>App: Valida token y otorga acceso"}),"\n",(0,t.jsx)(i.h2,{id:"15-multi-tenancy-y-ciclo-de-vida",children:"1.5 Multi-Tenancy Y Ciclo De Vida"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Aspecto"}),(0,t.jsx)(i.th,{children:"Implementaci\xf3n"}),(0,t.jsx)(i.th,{children:"Beneficio"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Tenant (realm)"}),(0,t.jsx)(i.td,{children:"Un tenant (realm) por pa\xeds"}),(0,t.jsx)(i.td,{children:"Aislamiento total de datos"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Delegaci\xf3n"}),(0,t.jsx)(i.td,{children:"Roles admin por tenant (realm)"}),(0,t.jsx)(i.td,{children:"Gesti\xf3n descentralizada"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Branding"}),(0,t.jsx)(i.td,{children:"Temas personalizados por tenant (realm)"}),(0,t.jsx)(i.td,{children:"UX espec\xedfica por tenant (realm)"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Federaci\xf3n"}),(0,t.jsx)(i.td,{children:"IdP configurable por tenant (realm)"}),(0,t.jsx)(i.td,{children:"Flexibilidad de integraci\xf3n"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Policies"}),(0,t.jsx)(i.td,{children:"Seguridad y compliance por tenant (realm)"}),(0,t.jsx)(i.td,{children:"Cumplimiento normativo local"})]})]})]}),"\n",(0,t.jsx)(i.h3,{id:"ciclo-de-vida-de-usuarios",children:"Ciclo De Vida De Usuarios"}),"\n",(0,t.jsx)(i.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e PENDING\n    PENDING --\x3e ACTIVE: Verificaci\xf3n email/aprobaci\xf3n admin\n    ACTIVE --\x3e SUSPENDED: Suspensi\xf3n temporal\n    ACTIVE --\x3e DISABLED: Baja definitiva\n    SUSPENDED --\x3e ACTIVE: Reactivaci\xf3n\n    DISABLED --\x3e DELETED: Retenci\xf3n y borrado"}),"\n",(0,t.jsx)(i.h3,{id:"integraci\xf3n-corporativa",children:"Integraci\xf3n Corporativa"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Sistema"}),(0,t.jsx)(i.th,{children:"Tipo Integraci\xf3n"}),(0,t.jsx)(i.th,{children:"Protocolo"}),(0,t.jsx)(i.th,{children:"Datos Sincronizados"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"LDAP Corporate"}),(0,t.jsx)(i.td,{children:"User Federation"}),(0,t.jsx)(i.td,{children:"LDAP/LDAPS"}),(0,t.jsx)(i.td,{children:"Usuarios, grupos, atributos"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Google Workspace"}),(0,t.jsx)(i.td,{children:"Identity Federation"}),(0,t.jsx)(i.td,{children:"OIDC"}),(0,t.jsx)(i.td,{children:"Autenticaci\xf3n"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Microsoft AD"}),(0,t.jsx)(i.td,{children:"User Federation"}),(0,t.jsx)(i.td,{children:"LDAP + OIDC"}),(0,t.jsx)(i.td,{children:"Usuarios, grupos, autenticaci\xf3n"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"HRIS System"}),(0,t.jsx)(i.td,{children:"User Provisioning"}),(0,t.jsx)(i.td,{children:"SCIM 2.0"}),(0,t.jsx)(i.td,{children:"Datos empleados, roles"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Audit System"}),(0,t.jsx)(i.td,{children:"Event Streaming"}),(0,t.jsx)(i.td,{children:"Kafka"}),(0,t.jsx)(i.td,{children:"Eventos de autenticaci\xf3n, cambios"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"16-tipos-de-usuarios-y-roles",children:"1.6 Tipos De Usuarios Y Roles"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Tipo Usuario"}),(0,t.jsx)(i.th,{children:"Descripci\xf3n"}),(0,t.jsx)(i.th,{children:"Roles T\xedpicos"}),(0,t.jsx)(i.th,{children:"MFA"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Operators"}),(0,t.jsx)(i.td,{children:"Operativo aeroportuario"}),(0,t.jsx)(i.td,{children:"Operator, Supervisor"}),(0,t.jsx)(i.td,{children:"No"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Managers"}),(0,t.jsx)(i.td,{children:"Gesti\xf3n y administraci\xf3n"}),(0,t.jsx)(i.td,{children:"Manager, Admin"}),(0,t.jsx)(i.td,{children:"S\xed"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"IT Staff"}),(0,t.jsx)(i.td,{children:"T\xe9cnico y desarrollo"}),(0,t.jsx)(i.td,{children:"Developer, SysAdmin"}),(0,t.jsx)(i.td,{children:"S\xed"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Executives"}),(0,t.jsx)(i.td,{children:"Alta gerencia"}),(0,t.jsx)(i.td,{children:"Executive, C-Level"}),(0,t.jsx)(i.td,{children:"S\xed"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"External Partners"}),(0,t.jsx)(i.td,{children:"Aerol\xedneas, proveedores"}),(0,t.jsx)(i.td,{children:"Partner-Read, Write"}),(0,t.jsx)(i.td,{children:"S\xed"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Service Accounts"}),(0,t.jsx)(i.td,{children:"Servicios/APIs"}),(0,t.jsx)(i.td,{children:"System, Integration"}),(0,t.jsx)(i.td,{children:"No (certificado)"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"17-stakeholders",children:"1.7 Stakeholders"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Rol"}),(0,t.jsx)(i.th,{children:"Responsabilidades"}),(0,t.jsx)(i.th,{children:"Expectativas"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"CISO"}),(0,t.jsx)(i.td,{children:"Pol\xedticas, compliance"}),(0,t.jsx)(i.td,{children:"Seguridad robusta"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"HR Directors"}),(0,t.jsx)(i.td,{children:"Ciclo de vida usuarios"}),(0,t.jsx)(i.td,{children:"Gesti\xf3n simple, roles correctos"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"IT Directors"}),(0,t.jsx)(i.td,{children:"Est\xe1ndares t\xe9cnicos, infraestructura"}),(0,t.jsx)(i.td,{children:"Servicio confiable"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Compliance Officers"}),(0,t.jsx)(i.td,{children:"Cumplimiento regulatorio"}),(0,t.jsx)(i.td,{children:"Auditor\xeda completa"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Operations Managers"}),(0,t.jsx)(i.td,{children:"Acceso diario, productividad"}),(0,t.jsx)(i.td,{children:"Autenticaci\xf3n r\xe1pida"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"18-referencias",children:"1.8 Referencias"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://www.keycloak.org/documentation",children:"Keycloak Documentation"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://datatracker.ietf.org/doc/html/draft-ietf-oauth-security-topics",children:"OAuth 2.1 Security Mejores Pr\xe1cticas"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect Core 1.0"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://docs.arc42.org/section-1/",children:"Arc42 - Introducci\xf3n y objetivos"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://c4model.com/",children:"C4 Model - Context & Container"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://structurizr.com/dsl",children:"Structurizr DSL"})}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"19-buenas-pr\xe1cticas-y-fragmentos-reutilizables",children:"1.9 Buenas Pr\xe1cticas y Fragmentos Reutilizables"}),"\n",(0,t.jsx)(i.h3,{id:"ejemplo-de-jwt-emitido-por-keycloak-tenantrealm",children:"Ejemplo de JWT emitido por Keycloak (tenant/realm)"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",children:'{\n  "sub": "1234567890",\n  "name": "John Doe",\n  "tenant": "talma-pe",\n  "realm": "talma-pe",\n  "roles": ["Operator", "Admin"],\n  "exp": 1712345678\n}\n'})}),"\n",(0,t.jsx)(i.h3,{id:"fragmento-de-configuraci\xf3n-multi-tenant-realm-en-net",children:"Fragmento de configuraci\xf3n multi-tenant (realm) en .NET"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:'services.AddAuthentication(options =>\n{\n    options.DefaultScheme = JwtBearerDefaults.AuthenticationScheme;\n})\n.AddJwtBearer(options =>\n{\n    options.Authority = $"https://keycloak.example.com/realms/{tenant}";\n    options.Audience = "api-service";\n    options.TokenValidationParameters = new TokenValidationParameters\n    {\n        ValidateIssuer = true,\n        ValidIssuer = $"https://keycloak.example.com/realms/{tenant}",\n        ValidateAudience = true,\n        ValidAudience = "api-service",\n        ValidateLifetime = true\n    };\n});\n'})})]})}function h(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>c});var r=n(96540);const t={},d=r.createContext(t);function s(e){const i=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(d.Provider,{value:i},e.children)}}}]);