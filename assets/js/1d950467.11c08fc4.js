"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[8767],{27935:(e,d,i)=>{i.r(d),i.d(d,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>n,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"servicios-corporativos/api-gateway/estrategia-solucion","title":"4. Estrategia de soluci\xf3n","description":"4.1 Decisiones clave","source":"@site/docs/servicios-corporativos/api-gateway/04-estrategia-solucion.md","sourceDirName":"servicios-corporativos/api-gateway","slug":"/servicios-corporativos/api-gateway/estrategia-solucion","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/api-gateway/estrategia-solucion","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/api-gateway/04-estrategia-solucion.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"3. Contexto y alcance del sistema","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/api-gateway/contexto-alcance"},"next":{"title":"5. Vista de bloques de construcci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/api-gateway/vista-bloques-construccion"}}');var c=i(74848),s=i(28453);const n={},t="4. Estrategia de soluci\xf3n",l={},a=[{value:"4.1 Decisiones clave",id:"41-decisiones-clave",level:2},{value:"4.2 Patrones aplicados",id:"42-patrones-aplicados",level:2},{value:"4.3 Multi-tenancy",id:"43-multi-tenancy",level:2},{value:"Cabeceras de Seguridad",id:"cabeceras-de-seguridad",level:3},{value:"4.4 Estrategia de despliegue y orquestaci\xf3n",id:"44-estrategia-de-despliegue-y-orquestaci\xf3n",level:2},{value:"4.5 Estrategia de rendimiento",id:"45-estrategia-de-rendimiento",level:2},{value:"4.6 Estrategia de configuraci\xf3n din\xe1mica",id:"46-estrategia-de-configuraci\xf3n-din\xe1mica",level:2},{value:"4.7 Estrategia de testing",id:"47-estrategia-de-testing",level:2}];function o(e){const d={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.header,{children:(0,c.jsx)(d.h1,{id:"4-estrategia-de-soluci\xf3n",children:"4. Estrategia de soluci\xf3n"})}),"\n",(0,c.jsx)(d.h2,{id:"41-decisiones-clave",children:"4.1 Decisiones clave"}),"\n",(0,c.jsxs)(d.table,{children:[(0,c.jsx)(d.thead,{children:(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.th,{children:"Decisi\xf3n"}),(0,c.jsx)(d.th,{children:"Alternativa elegida"}),(0,c.jsx)(d.th,{children:"Justificaci\xf3n"})]})}),(0,c.jsxs)(d.tbody,{children:[(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Proxy"})}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"YARP"})}),(0,c.jsx)(d.td,{children:"Microsoft, alto rendimiento"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Autenticaci\xf3n"})}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"JWT"})," + ",(0,c.jsx)(d.code,{children:"OAuth2"})]}),(0,c.jsx)(d.td,{children:"Est\xe1ndar industria"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Rate Limiting"})}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Redis"})}),(0,c.jsx)(d.td,{children:"Escalabilidad, multi-tenant"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Resiliencia"})}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Polly"})}),(0,c.jsx)(d.td,{children:"Patrones probados"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Observabilidad"})}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"Grafana"}),", ",(0,c.jsx)(d.code,{children:"Prometheus"}),", ",(0,c.jsx)(d.code,{children:"Loki"}),", ",(0,c.jsx)(d.code,{children:"Jaeger"})]}),(0,c.jsx)(d.td,{children:"Stack est\xe1ndar, trazabilidad y monitoreo"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Despliegue"})}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"AWS ECS Fargate"})," + ",(0,c.jsx)(d.code,{children:"Terraform"})]}),(0,c.jsx)(d.td,{children:"Portabilidad, IaC, automatizaci\xf3n"})]})]})]}),"\n",(0,c.jsx)(d.h2,{id:"42-patrones-aplicados",children:"4.2 Patrones aplicados"}),"\n",(0,c.jsxs)(d.table,{children:[(0,c.jsx)(d.thead,{children:(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.th,{children:"Patr\xf3n"}),(0,c.jsx)(d.th,{children:"Prop\xf3sito"}),(0,c.jsx)(d.th,{children:"Implementaci\xf3n"})]})}),(0,c.jsxs)(d.tbody,{children:[(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"API Gateway"})}),(0,c.jsx)(d.td,{children:"Punto de entrada \xfanico"}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"YARP"})})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Circuit Breaker"})}),(0,c.jsx)(d.td,{children:"Tolerancia a fallos"}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Polly"})})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Rate Limiting"})}),(0,c.jsx)(d.td,{children:"Protecci\xf3n recursos"}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Redis"})})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Load Balancing"})}),(0,c.jsx)(d.td,{children:"Distribuci\xf3n carga"}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"ALB"})," + ",(0,c.jsx)(d.code,{children:"YARP"})]})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Observabilidad"})}),(0,c.jsx)(d.td,{children:"Monitoreo y trazabilidad"}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"Prometheus"}),", ",(0,c.jsx)(d.code,{children:"Loki"}),", ",(0,c.jsx)(d.code,{children:"Jaeger"}),", ",(0,c.jsx)(d.code,{children:"Grafana"})]})]})]})]}),"\n",(0,c.jsx)(d.h2,{id:"43-multi-tenancy",children:"4.3 Multi-tenancy"}),"\n",(0,c.jsxs)(d.table,{children:[(0,c.jsx)(d.thead,{children:(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.th,{children:"Aspecto"}),(0,c.jsx)(d.th,{children:"Implementaci\xf3n"}),(0,c.jsx)(d.th,{children:"Tecnolog\xeda"})]})}),(0,c.jsxs)(d.tbody,{children:[(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Tenant resolution"})}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"JWT claims"})}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Keycloak realms"})})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Configuraci\xf3n"})}),(0,c.jsx)(d.td,{children:"Por tenant"}),(0,c.jsxs)(d.td,{children:["Din\xe1mico v\xeda ",(0,c.jsx)(d.code,{children:"SSM"}),"/env"]})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Rate limiting"})}),(0,c.jsx)(d.td,{children:"Por tenant/usuario"}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Redis buckets"})})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Enrutamiento"})}),(0,c.jsx)(d.td,{children:"Basado en tenant"}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"YARP rules"})})]})]})]}),"\n",(0,c.jsx)(d.h3,{id:"cabeceras-de-seguridad",children:"Cabeceras de Seguridad"}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{className:"language-http",children:"Strict-Transport-Security: max-age=31536000; includeSubDomains\nX-Frame-Options: DENY\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 1; mode=block\nContent-Security-Policy: default-src 'self'\n"})}),"\n",(0,c.jsx)(d.h2,{id:"44-estrategia-de-despliegue-y-orquestaci\xf3n",children:"4.4 Estrategia de despliegue y orquestaci\xf3n"}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsxs)(d.li,{children:["Despliegue en ",(0,c.jsx)(d.code,{children:"AWS ECS Fargate"})," usando ",(0,c.jsx)(d.code,{children:"Terraform"})," como IaC."]}),"\n",(0,c.jsxs)(d.li,{children:["Balanceo de carga y alta disponibilidad mediante ",(0,c.jsx)(d.code,{children:"Application Load Balancer"})," multi-AZ."]}),"\n",(0,c.jsxs)(d.li,{children:["Autoescalado por m\xe9tricas de ",(0,c.jsx)(d.code,{children:"CloudWatch"})," y ",(0,c.jsx)(d.code,{children:"Prometheus"}),"."]}),"\n",(0,c.jsx)(d.li,{children:"Blue-green deployment y rollback autom\xe1tico v\xeda ECS y ALB."}),"\n",(0,c.jsxs)(d.li,{children:["Observabilidad y monitoreo centralizados con ",(0,c.jsx)(d.code,{children:"Grafana"}),", ",(0,c.jsx)(d.code,{children:"Prometheus"}),", ",(0,c.jsx)(d.code,{children:"Loki"})," y ",(0,c.jsx)(d.code,{children:"Jaeger"}),"."]}),"\n"]}),"\n",(0,c.jsx)(d.h2,{id:"45-estrategia-de-rendimiento",children:"4.5 Estrategia de rendimiento"}),"\n",(0,c.jsxs)(d.table,{children:[(0,c.jsx)(d.thead,{children:(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.th,{children:"T\xe9cnica"}),(0,c.jsx)(d.th,{children:"Prop\xf3sito"}),(0,c.jsx)(d.th,{children:"Implementaci\xf3n"})]})}),(0,c.jsxs)(d.tbody,{children:[(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Pooling de Conexiones"})}),(0,c.jsx)(d.td,{children:"Reducir latencia"}),(0,c.jsx)(d.td,{children:"Pooling de clientes HTTP"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Compresi\xf3n de Respuesta"})}),(0,c.jsx)(d.td,{children:"Reducir ancho de banda"}),(0,c.jsx)(d.td,{children:"Gzip/Brotli"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"HTTP/2"})}),(0,c.jsx)(d.td,{children:"Multiplexaci\xf3n"}),(0,c.jsxs)(d.td,{children:["Soporte nativo en ",(0,c.jsx)(d.code,{children:".NET"})]})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Caching"})}),(0,c.jsx)(d.td,{children:"Reducir carga"}),(0,c.jsx)(d.td,{children:"Headers de cach\xe9, Redis"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Balanceo de Carga"})}),(0,c.jsx)(d.td,{children:"Distribuir carga"}),(0,c.jsx)(d.td,{children:"ALB + YARP"})]})]})]}),"\n",(0,c.jsxs)(d.table,{children:[(0,c.jsx)(d.thead,{children:(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.th,{children:"M\xe9trica"}),(0,c.jsx)(d.th,{children:"Objetivo"}),(0,c.jsx)(d.th,{children:"Medici\xf3n"})]})}),(0,c.jsxs)(d.tbody,{children:[(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Sobrecarga de Latencia"})}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"< 10ms p95"})}),(0,c.jsx)(d.td,{children:"Monitoreo APM"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Rendimiento"})}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"10K req/s"})}),(0,c.jsx)(d.td,{children:"Pruebas de carga"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Uso de Memoria"})}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"< 2GB"})," por instancia"]}),(0,c.jsx)(d.td,{children:"M\xe9tricas de contenedor"})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Uso de CPU"})}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"< 70%"})," promedio"]}),(0,c.jsxs)(d.td,{children:["M\xe9tricas ",(0,c.jsx)(d.code,{children:"CloudWatch"})]})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Tasa de Error"})}),(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"< 0.1%"})}),(0,c.jsx)(d.td,{children:"Seguimiento de errores"})]})]})]}),"\n",(0,c.jsx)(d.h2,{id:"46-estrategia-de-configuraci\xf3n-din\xe1mica",children:"4.6 Estrategia de configuraci\xf3n din\xe1mica"}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsxs)(d.li,{children:["Configuraci\xf3n centralizada v\xeda ",(0,c.jsx)(d.code,{children:"AWS Systems Manager"})," (SSM) y ",(0,c.jsx)(d.code,{children:"Secrets Manager"}),"."]}),"\n",(0,c.jsx)(d.li,{children:"Variables de entorno para overrides por ambiente y tenant."}),"\n",(0,c.jsx)(d.li,{children:"Recarga en caliente cada 30 segundos, validaci\xf3n de esquema y rollback autom\xe1tico si falla health check."}),"\n",(0,c.jsxs)(d.li,{children:["Jerarqu\xeda: ",(0,c.jsx)(d.code,{children:"Env Vars > SSM > Archivos locales > Defaults"}),"."]}),"\n"]}),"\n",(0,c.jsx)(d.h2,{id:"47-estrategia-de-testing",children:"4.7 Estrategia de testing"}),"\n",(0,c.jsxs)(d.table,{children:[(0,c.jsx)(d.thead,{children:(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.th,{children:"Nivel"}),(0,c.jsx)(d.th,{children:"Tipo"}),(0,c.jsx)(d.th,{children:"Cobertura"}),(0,c.jsx)(d.th,{children:"Herramientas"})]})}),(0,c.jsxs)(d.tbody,{children:[(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Unitario"})}),(0,c.jsx)(d.td,{children:"Componentes"}),(0,c.jsx)(d.td,{children:"80%+"}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"xUnit"}),", ",(0,c.jsx)(d.code,{children:"Moq"})]})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Integraci\xf3n"})}),(0,c.jsx)(d.td,{children:"API"}),(0,c.jsx)(d.td,{children:"70%+"}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"TestServer"}),", ",(0,c.jsx)(d.code,{children:"WebAppFactory"})]})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Contrato"})}),(0,c.jsx)(d.td,{children:"API contract"}),(0,c.jsx)(d.td,{children:"100%"}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"Pact"}),", validaci\xf3n OpenAPI"]})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Carga"})}),(0,c.jsx)(d.td,{children:"Performance"}),(0,c.jsx)(d.td,{children:"Escenarios clave"}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"NBomber"}),", ",(0,c.jsx)(d.code,{children:"Artillery"})]})]}),(0,c.jsxs)(d.tr,{children:[(0,c.jsx)(d.td,{children:(0,c.jsx)(d.code,{children:"Seguridad"})}),(0,c.jsx)(d.td,{children:"OWASP Top 10"}),(0,c.jsx)(d.td,{children:"Completo"}),(0,c.jsxs)(d.td,{children:[(0,c.jsx)(d.code,{children:"OWASP ZAP"}),", ",(0,c.jsx)(d.code,{children:"SonarQube"})]})]})]})]}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsxs)(d.li,{children:["Testing automatizado en CI/CD (",(0,c.jsx)(d.code,{children:"GitHub Actions"}),")."]}),"\n",(0,c.jsx)(d.li,{children:"Paridad de ambientes y testing multi-tenant."}),"\n",(0,c.jsxs)(d.li,{children:["Integraci\xf3n con ",(0,c.jsx)(d.code,{children:"Keycloak"})," para pruebas de autenticaci\xf3n multi-realm."]}),"\n",(0,c.jsxs)(d.li,{children:["Validaci\xf3n de observabilidad: m\xe9tricas, logs y trazas generadas y exportadas correctamente a ",(0,c.jsx)(d.code,{children:"Prometheus"}),", ",(0,c.jsx)(d.code,{children:"Loki"})," y ",(0,c.jsx)(d.code,{children:"Jaeger"}),"."]}),"\n"]}),"\n",(0,c.jsx)(d.hr,{}),"\n",(0,c.jsxs)(d.blockquote,{children:["\n",(0,c.jsx)(d.p,{children:"Esta estrategia de soluci\xf3n est\xe1 alineada con los modelos Arc42 y Structurizr DSL, asegurando portabilidad, observabilidad, seguridad y rendimiento en el despliegue y operaci\xf3n del API Gateway corporativo."}),"\n"]})]})}function h(e={}){const{wrapper:d}={...(0,s.R)(),...e.components};return d?(0,c.jsx)(d,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},28453:(e,d,i)=>{i.d(d,{R:()=>n,x:()=>t});var r=i(96540);const c={},s=r.createContext(c);function n(e){const d=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function t(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:n(e.components),r.createElement(s.Provider,{value:d},e.children)}}}]);