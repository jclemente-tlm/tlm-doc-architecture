"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[4287],{2645:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>n,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"servicios-corporativos/api-gateway/restricciones-arquitectura","title":"2. Restricciones de la arquitectura","description":"2.1 Restricciones t\xe9cnicas y de plataforma","source":"@site/docs/servicios-corporativos/api-gateway/02-restricciones-arquitectura.md","sourceDirName":"servicios-corporativos/api-gateway","slug":"/servicios-corporativos/api-gateway/restricciones-arquitectura","permalink":"/docs/servicios-corporativos/api-gateway/restricciones-arquitectura","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/api-gateway/02-restricciones-arquitectura.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"1. Introducci\xf3n y objetivos","permalink":"/docs/servicios-corporativos/api-gateway/introduccion-objetivos"},"next":{"title":"3. Contexto y alcance del sistema","permalink":"/docs/servicios-corporativos/api-gateway/contexto-alcance"}}');var c=s(74848),r=s(28453);const n={},t="2. Restricciones de la arquitectura",l={},o=[{value:"2.1 Restricciones t\xe9cnicas y de plataforma",id:"21-restricciones-t\xe9cnicas-y-de-plataforma",level:2},{value:"2.2 Restricciones de rendimiento y operaci\xf3n",id:"22-restricciones-de-rendimiento-y-operaci\xf3n",level:2},{value:"2.3 Restricciones de seguridad y cumplimiento",id:"23-restricciones-de-seguridad-y-cumplimiento",level:2},{value:"2.4 Restricciones de despliegue y CI/CD",id:"24-restricciones-de-despliegue-y-cicd",level:2},{value:"2.5 Restricciones de monitoreo y observabilidad",id:"25-restricciones-de-monitoreo-y-observabilidad",level:2},{value:"2.6 Limitaciones conocidas",id:"26-limitaciones-conocidas",level:2},{value:"2.7 Decisiones arquitect\xf3nicas derivadas",id:"27-decisiones-arquitect\xf3nicas-derivadas",level:2},{value:"Referencias",id:"referencias",level:2}];function a(e){const i={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.header,{children:(0,c.jsx)(i.h1,{id:"2-restricciones-de-la-arquitectura",children:"2. Restricciones de la arquitectura"})}),"\n",(0,c.jsx)(i.h2,{id:"21-restricciones-t\xe9cnicas-y-de-plataforma",children:"2.1 Restricciones t\xe9cnicas y de plataforma"}),"\n",(0,c.jsxs)(i.table,{children:[(0,c.jsx)(i.thead,{children:(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.th,{children:"Categor\xeda"}),(0,c.jsx)(i.th,{children:"Restricci\xf3n"}),(0,c.jsx)(i.th,{children:"Justificaci\xf3n"})]})}),(0,c.jsxs)(i.tbody,{children:[(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Runtime"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:".NET 8"})}),(0,c.jsx)(i.td,{children:"Est\xe1ndar corporativo"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Proxy"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"YARP"})}),(0,c.jsx)(i.td,{children:"Microsoft, alto rendimiento"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Base de datos"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"PostgreSQL"})}),(0,c.jsx)(i.td,{children:"Robustez"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Cache"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Redis"})}),(0,c.jsx)(i.td,{children:"Rendimiento"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Autenticaci\xf3n"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"OAuth2/OIDC"})}),(0,c.jsx)(i.td,{children:"Est\xe1ndar industria"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Contenedores"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"AWS ECS Fargate"})}),(0,c.jsx)(i.td,{children:"Serverless, portabilidad"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Orquestaci\xf3n"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"ECS"})}),(0,c.jsx)(i.td,{children:"Integraci\xf3n AWS nativa"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Secrets"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"AWS Secrets Manager"})}),(0,c.jsx)(i.td,{children:"Seguridad y cumplimiento"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Observabilidad"})}),(0,c.jsxs)(i.td,{children:[(0,c.jsx)(i.code,{children:"Grafana"}),", ",(0,c.jsx)(i.code,{children:"Prometheus"}),", ",(0,c.jsx)(i.code,{children:"Loki"}),", ",(0,c.jsx)(i.code,{children:"Jaeger"})]}),(0,c.jsx)(i.td,{children:"Stack est\xe1ndar, trazabilidad y monitoreo"})]})]})]}),"\n",(0,c.jsx)(i.h2,{id:"22-restricciones-de-rendimiento-y-operaci\xf3n",children:"2.2 Restricciones de rendimiento y operaci\xf3n"}),"\n",(0,c.jsxs)(i.table,{children:[(0,c.jsx)(i.thead,{children:(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.th,{children:"M\xe9trica"}),(0,c.jsx)(i.th,{children:"Objetivo"}),(0,c.jsx)(i.th,{children:"Raz\xf3n"})]})}),(0,c.jsxs)(i.tbody,{children:[(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Latencia"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"< 100ms P95"})}),(0,c.jsx)(i.td,{children:"Experiencia usuario"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Throughput"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"> 5,000 RPS"})}),(0,c.jsx)(i.td,{children:"Carga esperada"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Disponibilidad"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"99.9%"})}),(0,c.jsx)(i.td,{children:"SLA empresarial"})]})]})]}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"Multi-tenancy"})," obligatorio por pa\xeds y tenant."]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"Rate limiting"})," por tenant usando ",(0,c.jsx)(i.code,{children:"Redis"})," en modo cluster."]}),"\n",(0,c.jsxs)(i.li,{children:["Despliegue de contenedores en ",(0,c.jsx)(i.code,{children:"ECS Fargate"})," con ",(0,c.jsx)(i.code,{children:"Application Load Balancer"})," multi-AZ."]}),"\n",(0,c.jsxs)(i.li,{children:["Configuraci\xf3n y secretos gestionados externamente (",(0,c.jsx)(i.code,{children:"AWS Secrets Manager"}),")."]}),"\n",(0,c.jsxs)(i.li,{children:["Observabilidad centralizada (",(0,c.jsx)(i.code,{children:"Grafana"}),", ",(0,c.jsx)(i.code,{children:"Prometheus"}),", ",(0,c.jsx)(i.code,{children:"Loki"}),", ",(0,c.jsx)(i.code,{children:"Jaeger"}),")."]}),"\n",(0,c.jsxs)(i.li,{children:["Seguridad: arquitectura ",(0,c.jsx)(i.code,{children:"zero trust"}),", ",(0,c.jsx)(i.code,{children:"RBAC"})," por tenant, auditor\xeda completa de requests."]}),"\n"]}),"\n",(0,c.jsx)(i.h2,{id:"23-restricciones-de-seguridad-y-cumplimiento",children:"2.3 Restricciones de seguridad y cumplimiento"}),"\n",(0,c.jsxs)(i.table,{children:[(0,c.jsx)(i.thead,{children:(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.th,{children:"Control"}),(0,c.jsx)(i.th,{children:"Requisito/Implementaci\xf3n"})]})}),(0,c.jsxs)(i.tbody,{children:[(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Validaci\xf3n de tokens"})}),(0,c.jsxs)(i.td,{children:["Firma ",(0,c.jsx)(i.code,{children:"JWT"}),", clave p\xfablica (",(0,c.jsx)(i.code,{children:"Keycloak"}),")"]})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Limitaci\xf3n de velocidad"})}),(0,c.jsxs)(i.td,{children:[(0,c.jsx)(i.code,{children:"Redis"}),", protecci\xf3n DDoS, ventanas deslizantes"]})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Lista de IPs permitidas"})}),(0,c.jsx)(i.td,{children:"Restricci\xf3n por tenant"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Audit Logging"})}),(0,c.jsxs)(i.td,{children:["Logging estructurado, retenci\xf3n en ",(0,c.jsx)(i.code,{children:"Loki"})]})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Cifrado en tr\xe1nsito"})}),(0,c.jsxs)(i.td,{children:[(0,c.jsx)(i.code,{children:"TLS 1.3"}),", terminaci\xf3n en ",(0,c.jsx)(i.code,{children:"ALB"})]})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Aislamiento de red"})}),(0,c.jsxs)(i.td,{children:[(0,c.jsx)(i.code,{children:"VPC"}),", ",(0,c.jsx)(i.code,{children:"Security Groups"}),", ",(0,c.jsx)(i.code,{children:"AWS WAF"}),", ",(0,c.jsx)(i.code,{children:"Shield"})]})]})]})]}),"\n",(0,c.jsx)(i.h2,{id:"24-restricciones-de-despliegue-y-cicd",children:"2.4 Restricciones de despliegue y CI/CD"}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:["Im\xe1genes base ",(0,c.jsx)(i.code,{children:"distroless"})," y escaneo de vulnerabilidades obligatorio."]}),"\n",(0,c.jsxs)(i.li,{children:["L\xedmites de recursos definidos en ECS Task Definition (",(0,c.jsx)(i.code,{children:"CPU"}),", ",(0,c.jsx)(i.code,{children:"memoria"}),")."]}),"\n",(0,c.jsxs)(i.li,{children:["Health checks HTTP expuestos y monitoreados por ",(0,c.jsx)(i.code,{children:"ALB"})," y ",(0,c.jsx)(i.code,{children:"Prometheus"}),"."]}),"\n",(0,c.jsxs)(i.li,{children:["Blue-green deployment obligatorio usando ",(0,c.jsx)(i.code,{children:"ECS"})," y ",(0,c.jsx)(i.code,{children:"ALB"}),"."]}),"\n",(0,c.jsxs)(i.li,{children:["Pipeline CI/CD con ",(0,c.jsx)(i.code,{children:"GitHub Actions"}),", pruebas autom\xe1ticas, escaneo de seguridad (",(0,c.jsx)(i.code,{children:"Checkov"}),", ",(0,c.jsx)(i.code,{children:"Trivy"}),") y despliegue automatizado en AWS ECS (",(0,c.jsx)(i.code,{children:"Terraform"}),")."]}),"\n"]}),"\n",(0,c.jsx)(i.h2,{id:"25-restricciones-de-monitoreo-y-observabilidad",children:"2.5 Restricciones de monitoreo y observabilidad"}),"\n",(0,c.jsxs)(i.table,{children:[(0,c.jsx)(i.thead,{children:(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.th,{children:"Componente"}),(0,c.jsx)(i.th,{children:"Herramienta"}),(0,c.jsx)(i.th,{children:"Prop\xf3sito"})]})}),(0,c.jsxs)(i.tbody,{children:[(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"M\xe9tricas"})}),(0,c.jsxs)(i.td,{children:[(0,c.jsx)(i.code,{children:"Prometheus"}),", ",(0,c.jsx)(i.code,{children:"CloudWatch"})]}),(0,c.jsx)(i.td,{children:"Dashboards, alertas"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Logging"})}),(0,c.jsxs)(i.td,{children:[(0,c.jsx)(i.code,{children:"Loki"}),", ",(0,c.jsx)(i.code,{children:"CloudWatch Logs"})]}),(0,c.jsx)(i.td,{children:"Centralizaci\xf3n, auditor\xeda"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Tracing"})}),(0,c.jsxs)(i.td,{children:[(0,c.jsx)(i.code,{children:"Jaeger"}),", ",(0,c.jsx)(i.code,{children:"OpenTelemetry"})]}),(0,c.jsx)(i.td,{children:"Trazabilidad de requests"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Visualizaci\xf3n"})}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Grafana"})}),(0,c.jsx)(i.td,{children:"Dashboards y alertas"})]})]})]}),"\n",(0,c.jsx)(i.h2,{id:"26-limitaciones-conocidas",children:"2.6 Limitaciones conocidas"}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsx)(i.li,{children:"Actualizaciones de configuraci\xf3n: m\xe1ximo cada 30 segundos (polling)."}),"\n",(0,c.jsx)(i.li,{children:"Rate limiting: consistencia eventual en cluster Redis."}),"\n",(0,c.jsx)(i.li,{children:"Costo de infraestructura: optimizaci\xf3n continua requerida."}),"\n",(0,c.jsx)(i.li,{children:"Ventana de migraci\xf3n: m\xe1ximo 4 horas de downtime."}),"\n"]}),"\n",(0,c.jsx)(i.h2,{id:"27-decisiones-arquitect\xf3nicas-derivadas",children:"2.7 Decisiones arquitect\xf3nicas derivadas"}),"\n",(0,c.jsxs)(i.table,{children:[(0,c.jsx)(i.thead,{children:(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.th,{children:"Restricci\xf3n"}),(0,c.jsx)(i.th,{children:"Decisi\xf3n de Dise\xf1o"}),(0,c.jsx)(i.th,{children:"Trade-off"}),(0,c.jsx)(i.th,{children:"Mitigaci\xf3n"})]})}),(0,c.jsxs)(i.tbody,{children:[(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Soporte multi-tenant"})}),(0,c.jsx)(i.td,{children:"Middleware consciente de tenant"}),(0,c.jsx)(i.td,{children:"Sobrecarga de requests"}),(0,c.jsx)(i.td,{children:"Resoluci\xf3n eficiente de tenant"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Alta disponibilidad"})}),(0,c.jsx)(i.td,{children:"Dise\xf1o sin estado, multi-AZ"}),(0,c.jsx)(i.td,{children:"Complejidad de sesiones"}),(0,c.jsx)(i.td,{children:"Almacenamiento externo"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Seguridad"})}),(0,c.jsx)(i.td,{children:"Validaci\xf3n exhaustiva, zero trust"}),(0,c.jsx)(i.td,{children:"Latencia de procesamiento"}),(0,c.jsx)(i.td,{children:"Pipelines optimizados"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"Rendimiento"})}),(0,c.jsx)(i.td,{children:"Estrategias de caching y pooling"}),(0,c.jsx)(i.td,{children:"Consistencia eventual"}),(0,c.jsx)(i.td,{children:"Estrategias de invalidaci\xf3n"})]})]})]}),"\n",(0,c.jsx)(i.h2,{id:"referencias",children:"Referencias"}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://microsoft.github.io/reverse-proxy/",children:"YARP Documentation"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://docs.aws.amazon.com/ecs/",children:"AWS ECS Documentation"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://docs.aws.amazon.com/elasticloadbalancing/latest/application/",children:"AWS Application Load Balancer"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://docs.aws.amazon.com/cloudwatch/",children:"AWS CloudWatch"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://prometheus.io/",children:"Prometheus"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://grafana.com/",children:"Grafana"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://grafana.com/oss/loki/",children:"Loki"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://www.jaegertracing.io/",children:"Jaeger"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://tools.ietf.org/html/rfc6749",children:"OAuth 2.0 (RFC 6749)"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect Core"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://tools.ietf.org/html/rfc7519",children:"JWT (RFC 7519)"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://owasp.org/www-project-api-security/",children:"OWASP API Security"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://gdpr-info.eu/",children:"GDPR Regulation"})}),"\n",(0,c.jsx)(i.li,{children:(0,c.jsx)(i.a,{href:"https://www.pcisecuritystandards.org/",children:"PCI DSS Standards"})}),"\n"]}),"\n",(0,c.jsx)(i.hr,{}),"\n",(0,c.jsxs)(i.blockquote,{children:["\n",(0,c.jsx)(i.p,{children:"Todas las restricciones est\xe1n alineadas a los ADRs, modelos C4/Structurizr DSL y cumplen con los requisitos de seguridad, resiliencia, observabilidad y despliegue definidos para el API Gateway."}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,c.jsx)(i,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,i,s)=>{s.d(i,{R:()=>n,x:()=>t});var d=s(96540);const c={},r=d.createContext(c);function n(e){const i=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:n(e.components),d.createElement(r.Provider,{value:i},e.children)}}}]);