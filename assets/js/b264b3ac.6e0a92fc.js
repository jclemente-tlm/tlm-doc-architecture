"use strict";(self.webpackChunktlm_doc_architecture=self.webpackChunktlm_doc_architecture||[]).push([[908],{28453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>l});var a=n(96540);const r={},c=a.createContext(r);function s(e){const i=a.useContext(c);return a.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(c.Provider,{value:i},e.children)}},61189:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"servicios-corporativos/servicio-notificacion/conceptos-transversales","title":"8. Conceptos Transversales","description":"8.1 Seguridad y Autenticaci\xf3n","source":"@site/docs/servicios-corporativos/servicio-notificacion/08-conceptos-transversales.md","sourceDirName":"servicios-corporativos/servicio-notificacion","slug":"/servicios-corporativos/servicio-notificacion/conceptos-transversales","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/conceptos-transversales","draft":false,"unlisted":false,"editUrl":"https://github.com/jclemente-tlm/tlm-doc-architecture/edit/main/docs/servicios-corporativos/servicio-notificacion/08-conceptos-transversales.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"7. Vista De Implementaci\xf3n","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/vista-implementacion"},"next":{"title":"9. Decisiones De Arquitectura","permalink":"/tlm-doc-architecture/docs/servicios-corporativos/servicio-notificacion/decisiones-arquitectura"}}');var r=n(74848),c=n(28453);const s={},l="8. Conceptos Transversales",o={},t=[{value:"8.1 Seguridad y Autenticaci\xf3n",id:"81-seguridad-y-autenticaci\xf3n",level:2},{value:"8.2 Observabilidad y Monitoreo",id:"82-observabilidad-y-monitoreo",level:2},{value:"8.3 Resiliencia y Escalabilidad",id:"83-resiliencia-y-escalabilidad",level:2},{value:"8.4 Multi-tenancy y Multipa\xeds",id:"84-multi-tenancy-y-multipa\xeds",level:2},{value:"8.5 Gesti\xf3n de Configuraci\xf3n y Plantillas",id:"85-gesti\xf3n-de-configuraci\xf3n-y-plantillas",level:2},{value:"8.6 Mantenibilidad y Fiabilidad",id:"86-mantenibilidad-y-fiabilidad",level:2},{value:"Ejemplos y fragmentos clave",id:"ejemplos-y-fragmentos-clave",level:3},{value:"Ejemplo de JWT",id:"ejemplo-de-jwt",level:4},{value:"Ejemplo de registro estructurado",id:"ejemplo-de-registro-estructurado",level:4},{value:"Ejemplo de configuraci\xf3n por tenant",id:"ejemplo-de-configuraci\xf3n-por-tenant",level:4},{value:"Ejemplo de health checks",id:"ejemplo-de-health-checks",level:4},{value:"Ejemplo de configuraci\xf3n jer\xe1rquica",id:"ejemplo-de-configuraci\xf3n-jer\xe1rquica",level:4},{value:"Ejemplo de template internacionalizado",id:"ejemplo-de-template-internacionalizado",level:4},{value:"Ejemplo de clasificaci\xf3n de errores",id:"ejemplo-de-clasificaci\xf3n-de-errores",level:4}];function d(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"8-conceptos-transversales",children:"8. Conceptos Transversales"})}),"\n",(0,r.jsx)(i.h2,{id:"81-seguridad-y-autenticaci\xf3n",children:"8.1 Seguridad y Autenticaci\xf3n"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Autenticaci\xf3n y autorizaci\xf3n con Keycloak (",(0,r.jsx)(i.code,{children:"OAuth2"}),", validaci\xf3n de ",(0,r.jsx)(i.code,{children:"JWT"}),", control de ",(0,r.jsx)(i.code,{children:"claims"})," y ",(0,r.jsx)(i.code,{children:"roles"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Cifrado en tr\xe1nsito (",(0,r.jsx)(i.code,{children:"TLS 1.3"}),") y en reposo (",(0,r.jsx)(i.code,{children:"AES-256"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Gesti\xf3n de secretos centralizada (",(0,r.jsx)(i.code,{children:"AWS Secrets Manager"}),")"]}),"\n",(0,r.jsx)(i.li,{children:"Control de acceso granular por rol y tenant (realm)"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"82-observabilidad-y-monitoreo",children:"8.2 Observabilidad y Monitoreo"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Logs estructurados (",(0,r.jsx)(i.code,{children:"Serilog"}),", exportados a ",(0,r.jsx)(i.code,{children:"Loki"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["M\xe9tricas t\xe9cnicas y de negocio (",(0,r.jsx)(i.code,{children:"Prometheus"}),", visualizaci\xf3n en ",(0,r.jsx)(i.code,{children:"Grafana"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Trazabilidad distribuida (",(0,r.jsx)(i.code,{children:"OpenTelemetry"}),", visualizaci\xf3n en ",(0,r.jsx)(i.code,{children:"Jaeger"}),")"]}),"\n",(0,r.jsx)(i.li,{children:"Health checks automatizados"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"83-resiliencia-y-escalabilidad",children:"8.3 Resiliencia y Escalabilidad"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Circuit Breaker, reintentos y backoff exponencial"}),"\n",(0,r.jsx)(i.li,{children:"DLQ y manejo de errores clasificados"}),"\n",(0,r.jsx)(i.li,{children:"Escalado horizontal y particionado en servicios y almacenamiento"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"84-multi-tenancy-y-multipa\xeds",children:"8.4 Multi-tenancy y Multipa\xeds"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Aislamiento de datos por esquema y ",(0,r.jsx)(i.code,{children:"tenantId"})," (realm) en ",(0,r.jsx)(i.code,{children:"PostgreSQL"})]}),"\n",(0,r.jsx)(i.li,{children:"Configuraci\xf3n y personalizaci\xf3n por tenant y pa\xeds"}),"\n",(0,r.jsx)(i.li,{children:"Cumplimiento legal y localizaci\xf3n (idiomas, monedas, zonas horarias)"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"85-gesti\xf3n-de-configuraci\xf3n-y-plantillas",children:"8.5 Gesti\xf3n de Configuraci\xf3n y Plantillas"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Configuraci\xf3n jer\xe1rquica y por entorno (",(0,r.jsx)(i.code,{children:"YAML"}),", ",(0,r.jsx)(i.code,{children:"JSON"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Plantillas internacionalizadas (",(0,r.jsx)(i.code,{children:"RazorEngine"}),", ",(0,r.jsx)(i.code,{children:"Liquid"}),", ",(0,r.jsx)(i.code,{children:"i18n"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Cache multi-nivel (memoria, ",(0,r.jsx)(i.code,{children:"Redis"}),")"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"86-mantenibilidad-y-fiabilidad",children:"8.6 Mantenibilidad y Fiabilidad"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Arquitectura modular, Clean Architecture y DDD"}),"\n",(0,r.jsx)(i.li,{children:"Documentaci\xf3n y pruebas automatizadas"}),"\n",(0,r.jsx)(i.li,{children:"Backups, replicaci\xf3n multi-AZ"}),"\n",(0,r.jsxs)(i.li,{children:["Infraestructura como c\xf3digo (",(0,r.jsx)(i.code,{children:"Terraform"}),")"]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h3,{id:"ejemplos-y-fragmentos-clave",children:"Ejemplos y fragmentos clave"}),"\n",(0,r.jsx)(i.h4,{id:"ejemplo-de-jwt",children:"Ejemplo de JWT"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'{\n  "sub": "system:notification-processor",\n  "aud": "notification-api",\n  "scope": "notifications:send notifications:read",\n  "tenant": "talma-pe",\n  "roles": ["notification-sender"],\n  "exp": 1640995200\n}\n'})}),"\n",(0,r.jsx)(i.h4,{id:"ejemplo-de-registro-estructurado",children:"Ejemplo de registro estructurado"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'Log.Information("Notification {NotificationId} sent via {Channel} to {RecipientCount} recipients",\n    notificationId, channel, recipients.Count);\n'})}),"\n",(0,r.jsx)(i.h4,{id:"ejemplo-de-configuraci\xf3n-por-tenant",children:"Ejemplo de configuraci\xf3n por tenant"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'{\n  "tenantId": "talma-pe",\n  "channels": {\n    "email": {\n      "provider": "sendgrid",\n      "apiKey": "secretsmanager://talma-pe/sendgrid",\n      "templates": {\n        "default": "peru-branding-template"\n      }\n    },\n    "sms": {\n      "provider": "twilio",\n      "phoneNumbers": ["+51900123456"]\n    }\n  },\n  "compliance": {\n    "gdpr": false,\n    "local_regulations": ["peru-data-protection-law"]\n  }\n}\n'})}),"\n",(0,r.jsx)(i.h4,{id:"ejemplo-de-health-checks",children:"Ejemplo de health checks"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'services.AddHealthChecks()\n    .AddCheck<DatabaseHealthCheck>("database")\n    .AddCheck<RedisHealthCheck>("cache");\n'})}),"\n",(0,r.jsx)(i.h4,{id:"ejemplo-de-configuraci\xf3n-jer\xe1rquica",children:"Ejemplo de configuraci\xf3n jer\xe1rquica"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-yaml",children:"logging:\n  level: Information\n\ndevelopment:\n  logging:\n    level: Debug\n  providers:\n    email:\n      mock: true\n\nproduction:\n  providers:\n    email:\n      sendgrid:\n        api_key: ${SENDGRID_API_KEY}\n"})}),"\n",(0,r.jsx)(i.h4,{id:"ejemplo-de-template-internacionalizado",children:"Ejemplo de template internacionalizado"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-liquid",children:"{% assign greeting = 'email.greeting' | t: name: user.name %}\n{{ greeting }}\n{{ 'flight.status' | t: flight: flight_number, status: current_status }}\n"})}),"\n",(0,r.jsx)(i.h4,{id:"ejemplo-de-clasificaci\xf3n-de-errores",children:"Ejemplo de clasificaci\xf3n de errores"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"public enum ErrorCategory\n{\n    Transient,      // Network timeout, temporary provider issue\n    Permanent,      // Invalid email, template not found\n    Configuration,  // Missing API key, invalid settings\n    Business        // User preferences, compliance violation\n}\n"})}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.p,{children:"Estos conceptos transversales aseguran operaci\xf3n consistente, segura, escalable y observable, alineada con la arquitectura y decisiones del sistema."})]})}function u(e={}){const{wrapper:i}={...(0,c.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);